<?xml version="1.0" encoding="WINDOWS-1252" ?>
<report name="x_sstacheressRef" DTDVersion="9.0.2.0.10"
 afterParameterFormTrigger="afterpform">
  <xmlSettings xmlTag="X_SSTACHERESSREF" xmlPrologType="text">
  <![CDATA[<?xml version="1.0"?>]]>
  </xmlSettings>
  <reportHtmlEscapes>
    <beforeReportHtmlEscape>
    <![CDATA[<html>
<body dir=&Direction bgcolor="#ffffff">
]]>
    </beforeReportHtmlEscape>
    <beforePageHtmlEscape>
    <![CDATA[#NULL#]]>
    </beforePageHtmlEscape>
    <afterPageHtmlEscape>
    <![CDATA[<hr size=5 noshade>
]]>
    </afterPageHtmlEscape>
    <beforeFormHtmlEscape>
    <![CDATA[<html>
<body dir=&Direction bgcolor="#ffffff">
<form method=post action="_action_">
<input name="hidden_run_parameters" type=hidden value="_hidden_">
<font color=red><!--error--></font>
<center>
<p><table border=0 cellspacing=0 cellpadding=0>
<tr>
<td><input type=submit></td>
<td width=15>
<td><input type=reset></td>
</tr>
</table>
<p><hr><p>
]]>
    </beforeFormHtmlEscape>
    <pageNavigationHtmlEscape>
    <![CDATA[<HTML>
<TITLE>Oracle HTML Navigator</TITLE>
<HEAD>
<SCRIPT LANGUAGE = "JavaScript">

var jump_index = 1			// Jump to this page
var num_pages = &TotalPages			// Total number of pages
var basefilename = "&file_name"		// Base file name
var fileext = "&file_ext"		//File extension

/* jumps to "new_page" */
function new_page(form, new_page)
{
	form.reqpage.value = new_page;
	parent.frames[0].location = basefilename + "_" + new_page + "."+fileext;
}

/* go back one page */
function back(form)
{
	/* if we are not in first page */
	if (jump_index > 1)
	{
		jump_index--;
		new_page(form, jump_index);
	}
}

/* go forward one page */
function forward(form)
{
	/* if we are not in last page */
	if (jump_index < num_pages)
	{
		jump_index++;
		new_page(form, jump_index);
	}
}

/* go to first page */
function first(form)
{
	if(jump_index != 1)
	{
		jump_index = 1;
		new_page(form, jump_index);
	}
}

/* go to last page */
function last(form)
{
	if(jump_index != num_pages)
	{
		jump_index = num_pages;
		new_page(form, jump_index);
	}
}

/* go to the user specified page number */
function pagenum(form)
{
	/* sanity check */
	if (form.reqpage.value < 1)
	{
		form.reqpage.value = 1;
	}
	if (form.reqpage.value > num_pages)
	{
		form.reqpage.value = num_pages;
	}
	jump_index = form.reqpage.value;
	new_page(form, jump_index);
}
</SCRIPT>
</HEAD>

<BODY>
<FORM NAME="ThisForm" onSubmit="pagenum(this); return false;">
<center><table><tr>
<td> <INPUT TYPE="button"  VALUE="<< " onClick="first(this.form)">
<td> <INPUT TYPE="button"  VALUE=" < " onClick="back(this.form)">
<td> <INPUT TYPE="button"  VALUE="Page:" onClick="pagenum(this.form)">
<td> <INPUT NAME="reqpage" VALUE="1" SIZE=2>
<td> <INPUT TYPE="button"  VALUE=" > " onClick="forward(this.form)">
<td> <INPUT TYPE="button"  VALUE=" >>" onClick="last(this.form)">
</table></center>
</FORM></BODY>
</HTML>
]]>
    </pageNavigationHtmlEscape>
  </reportHtmlEscapes>
  <data>
    <userParameter name="P_PARAM6" datatype="character" width="40"
     initialValue=".CSV" label="P Param6" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_SEPARATEUR" datatype="character" precision="10"
     label="P Separateur" defaultWidth="0" defaultHeight="0" display="no"/>
    <userParameter name="P_GLOBAL" datatype="character" width="12000"
     initialValue="X079476;ME;99999;0161614;01 ;00000000000;000000000;0;04707,13281;;;P0000;29357;29234;ges,cli,isac,ginv,act,fin,supach,acdet,fidet,admin,copi;;dir,me,mo,isacm,inv,ach,suiviact,rbip,ref,ore,req;34164,37408"
     label="P Global" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_ANNEE" datatype="number" width="4" precision="10"
     label="P Annee" defaultWidth="0" defaultHeight="0" display="no"/>
    <userParameter name="P_PARAM7" datatype="character" precision="10"
     initialValue="TOUS" label="DP P_PARAM7" defaultWidth="0"
     defaultHeight="0"/>
    <userParameter name="P_PARAM8" datatype="character" precision="10"
     initialValue="TOUS" label="Projet P_PARAM8" defaultWidth="0"
     defaultHeight="0"/>
    <userParameter name="P_PARAM9" datatype="character" precision="10"
     initialValue="TOUS" label="Application P_PARAM9" defaultWidth="0"
     defaultHeight="0"/>
    <userParameter name="P_PARAM10" datatype="character" precision="10"
     initialValue="TOUS" label="CAFI P Param10" defaultWidth="0"
     defaultHeight="0"/>
    <userParameter name="P_PARAM11" datatype="character" precision="10"
     initialValue="TOUS" label="CAPAYEUR P Param11" defaultWidth="0"
     defaultHeight="0"/>
    <userParameter name="P_PARAM12" datatype="character" precision="10"
     initialValue="TOUS" label="CADA P Param12" defaultWidth="0"
     defaultHeight="0"/>
    <userParameter name="P_WHERE" datatype="character" width="40000"
     precision="10" label="P Where" defaultWidth="0" defaultHeight="0"
     display="no"/>
    <userParameter name="P_FROM" datatype="character" width="32000"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_SMENUS_GES" datatype="character" precision="10"
     defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_PARAM0" datatype="character" width="200"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_PERIM_CAFI" datatype="character" width="5024"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_PERIM_ME" datatype="character" width="5024"
     defaultWidth="0" defaultHeight="0"/>
    <systemParameter name="MODE" initialValue="Default"/>
    <systemParameter name="ORIENTATION" initialValue="Default"/>
    <dataSource name="Q_1">
      <select>
      <![CDATA[-- X_SSTACHE RESS REF
		-- maj : 12/04/2012
		--KRA maj : 19/01/2015 - PPM 60727
		SELECT DISTINCT
			:P_SEPARATEUR||rpad(ligne_bip.pid,4,' ')||:P_SEPARATEUR AS LigneCode --code_BIP
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.pnom,' '),30,' ')||:P_SEPARATEUR AS LigneLib --libelle_ligne_BIP
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.TYPPROJ,' '),2,' ')||:P_SEPARATEUR AS LigneTypePrin --A confirmer
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.ARCTYPE,' '),3,' ')||:P_SEPARATEUR AS LigneTypeSec --A confirmer
			, :P_SEPARATEUR||lpad( TO_CHAR(ligne_bip.codsg), 7, '0') ||:P_SEPARATEUR AS LigneDpgCode --DPG_ligne
			, :P_SEPARATEUR||rpad(struct_info.LIBDSG,30,' ') ||:P_SEPARATEUR AS LigneDpgLib
			, :P_SEPARATEUR||rpad(struct_info.sigdep || '/' || struct_info.sigpole,7,' ') ||:P_SEPARATEUR AS LigneDepPoleLib --sigle_DPG
			, :P_SEPARATEUR||rpad(nvl(directions.libdir,' '),30,' ') ||:P_SEPARATEUR AS LigneDpgDirLib --libelle_direction
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.CLICODE,' '),5,' ')||:P_SEPARATEUR AS CliPrinCode
			, :P_SEPARATEUR||rpad(nvl((SELECT CLILIB FROM CLIENT_MO WHERE CLICODE = ligne_bip.CLICODE),' '),25,' ')||:P_SEPARATEUR AS CliPrinLib
			, :P_SEPARATEUR||rpad(nvl((SELECT BRANCHES.LIBBR FROM CLIENT_MO, DIRECTIONS, BRANCHES
			WHERE CLIENT_MO.CLICODE = ligne_bip.CLICODE
			AND CLIENT_MO.CLIDIR = DIRECTIONS.CODDIR
			AND DIRECTIONS.CODBR = BRANCHES.CODBR),' '),30,' ')||:P_SEPARATEUR AS CliPrinBrancheLib
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.CLICODE_OPER,' '),5,' ')||:P_SEPARATEUR AS CliOperCode
			, :P_SEPARATEUR||rpad(nvl((SELECT CLILIB FROM CLIENT_MO WHERE CLICODE = ligne_bip.CLICODE_OPER),' '),25,' ')||:P_SEPARATEUR AS CliOperLib
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.metier,' '),3,' ') ||:P_SEPARATEUR AS LigneMetierCode --metier
			, :P_SEPARATEUR||lpad(nvl(to_char(ligne_bip.dpcode),' '),5,' ') ||:P_SEPARATEUR AS DPCode --CODE_DOSSIER_PROJET
			, :P_SEPARATEUR||rpad(nvl(DOSSIER_PROJET.DPLIB,' '),50,' ') ||:P_SEPARATEUR AS DPLib
			, :P_SEPARATEUR||lpad(nvl(DPCOPI.DP_COPI,' '),6,' ') ||:P_SEPARATEUR AS DPCOPICode
			, :P_SEPARATEUR||rpad(nvl(DPCOPI.LIBELLE,' '),50,' ') ||:P_SEPARATEUR AS DPCOPILib
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.icpi,' '),5,' ') ||:P_SEPARATEUR AS ProjCode --CODE_PROJET 
			, :P_SEPARATEUR||rpad(nvl(PI.ilibel,' '),50,' ')    ||:P_SEPARATEUR AS ProjLib --libelle_projet
			, :P_SEPARATEUR||lpad(nvl(to_char(PI.cada),' '),5,'0') ||:P_SEPARATEUR AS CADA --CADA
			, :P_SEPARATEUR||rpad(nvl(ligne_bip.airt,' '),5,' ') ||:P_SEPARATEUR AS AppliCode --CODE_APPLICATION 
			, :P_SEPARATEUR||lpad(nvl(to_char(ligne_bip.codcamo),' '),5,'0') ||:P_SEPARATEUR AS CApayeurCode --CA_PAYEUR
			, :P_SEPARATEUR||rpad(CONSO.pid,4,' ')||:P_SEPARATEUR AS LigneSAISIECode --ligne_depart_BIP
			, :P_SEPARATEUR||rpad(nvl(etape.TYPETAP,' '),2,' ')||:P_SEPARATEUR AS EtapeType --typetap
            , :P_SEPARATEUR||rpad(nvl(CONSO.ecet,' '),2,' ')    ||:P_SEPARATEUR AS EtapeCode --etape
            , :P_SEPARATEUR||rpad(nvl(CONSO.libetape,' '),30,' ') ||:P_SEPARATEUR AS EtapeLib --libelle_etape -- TD 712 
            , :P_SEPARATEUR||rpad(nvl(CONSO.acta,' '),2,' ')    ||:P_SEPARATEUR AS TacheCode --tache
            , :P_SEPARATEUR||rpad(nvl(CONSO.libtache,' '),30,' ') ||:P_SEPARATEUR AS TacheLib --libelle_tache -- TD 712 
            , :P_SEPARATEUR||rpad(nvl(CONSO.acst,' '),2,' ')    ||:P_SEPARATEUR AS SoustacheCode --ss_tache    --PID => sur 7
            , :P_SEPARATEUR||rpad(nvl(CONSO.aist,' '),6,' ')    ||:P_SEPARATEUR AS SoustacheType --id_ss_tache    -- F.115
            , :P_SEPARATEUR||rpad(nvl(CONSO.asnom,' '),30,' ') ||:P_SEPARATEUR AS SoustacheLib --libelle_ss_tache
			, :P_SEPARATEUR||rpad((DECODE(ligne_bip.TYPPROJ, '1', 'CHANGE', '2', 'CHANGE', 7, 'IMPRODUCTIF', 'RUN')),11,' ') ||:P_SEPARATEUR AS LigneCateg --A confirmer
			, :P_SEPARATEUR||rpad((DECODE((SELECT TYPPROJ FROM LIGNE_BIP WHERE PID = CONSO.factpid), '1', 'CHANGE', '2', 'CHANGE', 7, 'IMPRODUCTIF', 'RUN')),11,' ') ||:P_SEPARATEUR AS LigneSAISIECateg
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl(ressource.rnom,' '),30,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',30,' '),
											rpad(nvl(ressource.rnom,' '),30,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessNom --nom
			-- FAD PPM 65049 : Non réstitution des données RESSOURCES
			--, :P_SEPARATEUR||rpad(nvl(ressource.RPRENOM,' '),15,' ') ||:P_SEPARATEUR AS RessPrenom
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl(ressource.RPRENOM,' '),15,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',15,' '),
											rpad(nvl(ressource.RPRENOM,' '),15,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessPrenom
			--, :P_SEPARATEUR||rpad(nvl(ressource.MATRICULE,' '),7,' ') ||:P_SEPARATEUR AS RessMatricule
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl(ressource.MATRICULE,' '),7,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',7,' '),
											rpad(nvl(ressource.MATRICULE,' '),7,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessMatricule
			--, :P_SEPARATEUR||rpad(nvl(TO_CHAR(ressource.IGG),' '),10,' ') ||:P_SEPARATEUR AS RessIGG
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl(TO_CHAR(ressource.IGG),' '),10,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',10,' '),
											rpad(nvl(TO_CHAR(ressource.IGG),' '),10,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessIGG
			--, :P_SEPARATEUR|| lpad(nvl(to_char(CONSO.ident),' '),5,' ') ||:P_SEPARATEUR AS RessCode --ident
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										lpad(nvl(to_char(CONSO.ident),' '),5,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',5,' '),
											lpad(nvl(to_char(CONSO.ident),' '),5,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessCode
			-- FAD PPM 65049 : Fin
			, :P_SEPARATEUR||to_char(rpad(nvl(CONSO.codsg,0),7,' ') ,'FM0000000')||:P_SEPARATEUR AS RessDpgCode --codsg_ress
			, :P_SEPARATEUR||rpad((SELECT LIBDSG from struct_info where codsg = CONSO.codsg),30,' ') ||:P_SEPARATEUR AS RessDpgLib
			-- FAD PPM 65049 : Non réstitution des données RESSOURCES
			--, :P_SEPARATEUR||rpad(DECODE(CONSO.soccode, 'SG..', 'I', 'E'),1,' ') ||:P_SEPARATEUR AS RessIntExt
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(DECODE(CONSO.soccode, 'SG..', 'I', 'E'),1,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											' ',
											rpad(DECODE(CONSO.soccode, 'SG..', 'I', 'E'),1,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessIntExt
			--, :P_SEPARATEUR||rpad(nvl(CONSO.soccode,' '),4,' ') ||:P_SEPARATEUR AS RessSteCode --soccode_ress
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl(CONSO.soccode,' '),4,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',4,' '),
											rpad(nvl(CONSO.soccode,' '),4,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS RessSteCode
			--, :P_SEPARATEUR||nvl(TYPE_RESSOURCE,' ') ||:P_SEPARATEUR AS RessType
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										TYPE_RESSOURCE,
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											' ',
											TYPE_RESSOURCE
										)
									),
									' '
								) || :P_SEPARATEUR AS RessType
			-- FAD PPM 65049 : Fin
			, :P_SEPARATEUR||rpad(nvl(CODE_PRESTATION,' '),3,' ') ||:P_SEPARATEUR AS RessPrestationCode
			-- FAD PPM 65049 : Non réstitution des données RESSOURCES
			--, :P_SEPARATEUR||rpad(nvl(MCI,' '),3,' ') ||:P_SEPARATEUR AS MciCode --MCI
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl(MCI,' '),3,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',3,' '),
											rpad(nvl(MCI,' '),3,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS MciCode
			--, :P_SEPARATEUR||rpad(nvl((SELECT LIBELLE FROM MODE_CONTRACTUEL WHERE CODE_CONTRACTUEL = MCI),' '),60,' ') ||:P_SEPARATEUR AS MciLib
			,  :P_SEPARATEUR|| DECODE(
									:P_PARAM0,
									'fournisseur',
									DECODE(
										pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME),
										'O',
										rpad(nvl((SELECT LIBELLE FROM MODE_CONTRACTUEL WHERE CODE_CONTRACTUEL = MCI),' '),60,' '),
										DECODE(
											pack_habilitation.isPerimCafi(conso.cafi ,:P_PERIM_CAFI),
											'N',
											RPAD(' ',60,' '),
											rpad(nvl((SELECT LIBELLE FROM MODE_CONTRACTUEL WHERE CODE_CONTRACTUEL = MCI),' '),60,' ')
										)
									),
									' '
								) || :P_SEPARATEUR AS MciLib
			-- FAD PPM 65049 : Fin
			,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.janvier, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.janvier, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_janv --janvier
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.fevrier, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.fevrier, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_fevr --fevrier
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.mars, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.mars, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_mars --mars
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.avril, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.avril, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_avri --avril
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.mai, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.mai, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_mai --mai
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.juin, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.juin, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_juin --juin
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.juillet, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.juillet, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_juil --juillet
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.aout, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.aout, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_aout --aout
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.septembre, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.septembre, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_sept --septembre
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.octobre, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.octobre, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_octo --octobre
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.novembre, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.novembre, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_nove --novembre
            ,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.decembre, 'FM99990D00'),to_char(0, 'FM99990D00')),8,' ') ,
            lpad (NVL (TO_CHAR(CONSO.decembre, 'FM00000.00'),to_char(0, 'FM00000.00')), 8, ' ')) AS Consomme_dece --decembre
			
			,decode(:P_param6,'.CSV',
             lpad(nvl(to_char(CONSO.janvier + CONSO.fevrier + CONSO.mars + CONSO.avril + CONSO.mai + CONSO.juin + CONSO.juillet + CONSO.aout +
			 CONSO.septembre + CONSO.octobre + CONSO.novembre + CONSO.decembre, 'FM9999990D00'), to_char(0, 'FM9999990D00')),10,' ') ,
            lpad(nvl(to_char(CONSO.janvier + CONSO.fevrier + CONSO.mars + CONSO.avril + CONSO.mai + CONSO.juin + CONSO.juillet + CONSO.aout +
			 CONSO.septembre + CONSO.octobre + CONSO.novembre + CONSO.decembre, 'FM0000000.00'), to_char(0, 'FM0000000.00')),10,' ')) AS Consomme_AA
			
			,decode(:P_param6,'.CSV',
			lpad(nvl(to_char(pack_utile_cout.getCoutHTR(CONSO.soccode, ressource.rtype,:P_ANNEE,ligne_bip.metier, conso.niveau, CONSO.codsg, CONSO.cout, TO_CHAR(CONSO.cdeb,'DDMMYYYY'), struct_info.filcode), 'FM9999999990D00'),to_char(0, 'FM9999999990D00')),13,' ') ,
			lpad (NVL(TO_CHAR(pack_utile_cout.getCoutHTR(CONSO.soccode, ressource.rtype,:P_ANNEE,ligne_bip.metier, conso.niveau, CONSO.codsg, CONSO.cout, TO_CHAR(CONSO.cdeb,'DDMMYYYY'), struct_info.filcode), 'FM0000000000.00'),to_char(0, 'FM0000000000.00')),13,' '))
			AS CoutFtHTR --coutHTR
			
			,decode(:P_param6,'.CSV',
			lpad(nvl(to_char(pack_utile_cout.getCoutEnvHTR(CONSO.soccode ,ressource.rtype ,:P_ANNEE,CONSO.codsg ,ligne_bip.metier,TO_CHAR ( CONSO.cdeb , 'DDMMYYYY') ,  struct_info.filcode), 'FM9999999990D00'),to_char(0, 'FM9999999990D00')),13,' ') ,
			lpad(NVL(TO_CHAR(pack_utile_cout.getCoutEnvHTR(CONSO.soccode ,ressource.rtype ,:P_ANNEE,CONSO.codsg ,ligne_bip.metier,TO_CHAR ( CONSO.cdeb , 'DDMMYYYY') ,  struct_info.filcode), 'FM0000000000.00'),to_char(0, 'FM0000000000.00')),13,' '))
			AS CoutEnvHTR --coutenv
			, :P_SEPARATEUR||lpad(nvl(to_char(conso.cafi),' '),5,'0') ||:P_SEPARATEUR AS RessCAFI --CAFI
			,rpad(nvl(DECODE(:P_PARAM0,'fournisseur',
			DECODE( pack_habilitation.isDpgMe(CONSO.codsg,:P_PERIM_ME), 'O', 
                    DECODE(:P_SMENUS_GES,'O', 
                            NVL( 
                                pack_utile_cout.Get_Profil_Fi( CONSO.codsg, CONSO.cafi, CODE_PRESTATION, CONSO.ident, TO_CHAR(CONSO.cdeb,'DDMMYYYY'), CONSO.soccode, ressource.rtype,  ligne_bip.metier, conso.niveau, ligne_bip.codcamo,ligne_bip.pid )
                                , ' ')
                            ,' '  
                          ) ,
                    DECODE(  pack_habilitation.isPerimCafi( conso.cafi , :P_PERIM_CAFI ) ,'N',
                            ' '
                            ,DECODE(:P_SMENUS_GES,'O', 
                                     NVL( 
                                         pack_utile_cout.Get_Profil_Fi( CONSO.codsg, CONSO.cafi, CODE_PRESTATION, CONSO.ident, TO_CHAR(CONSO.cdeb,'DDMMYYYY'), CONSO.soccode, ressource.rtype,  ligne_bip.metier, conso.niveau, ligne_bip.codcamo,ligne_bip.pid )
                                         , ' ')
                                     ,' '  
                                   )   
                          ) 
               )
			, ' ' ),' '),12, ' ') ProfilFI --PROFIL_FI
			,rpad(NVL ( TO_CHAR ( CONSO.date_deb_ini , 'DD/MM/YYYY' ) , ' ' ), 10 , ' ') StacheInitDebDate --DATE_DEB_INI
			,rpad(NVL ( TO_CHAR ( CONSO.date_fin_ini , 'DD/MM/YYYY' ) , ' ' ), 10 , ' ') StacheInitFinDate --DATE_FIN_INI
			,rpad(NVL ( TO_CHAR ( CONSO.date_deb_rev , 'DD/MM/YYYY' ) , ' ' ), 10 , ' ') StacheRevDebDate --DATE_DEB_REV
			,rpad(NVL ( TO_CHAR ( CONSO.date_fin_rev , 'DD/MM/YYYY' ) , ' ' ), 10 , ' ') StacheRevFinDate --DATE_FIN_REV
			,rpad(nvl(CONSO.statut_sstache,' '),2,' ') StacheStatut --STATUT_SSTACHE
			,lpad(NVL( TO_CHAR (CONSO.duree_sstache ), ' ' ),5,' ') StacheDuree --DUREE_SSTACHE			
			,rpad(nvl(CONSO.param_sstache,' '),5,' ') StacheParamLocal --PARAM_SSTACHE
			,decode(:P_param6,'.CSV', DECODE(DPCOPI.DPCOPIAXEMETIER, NULL,(DECODE(PI.PROJAXEMETIER, NULL, (DECODE(CONSO.TACHEAXEMETIER, NULL, NULL, CONSO.TACHEAXEMETIER) ), PI.PROJAXEMETIER) ) , DPCOPI.DPCOPIAXEMETIER ) , rpad(NVL ( DECODE(DPCOPI.DPCOPIAXEMETIER, NULL,(DECODE(PI.PROJAXEMETIER, NULL, (DECODE(CONSO.TACHEAXEMETIER, NULL, NULL, CONSO.TACHEAXEMETIER) ), PI.PROJAXEMETIER) ) , DPCOPI.DPCOPIAXEMETIER),' '),12, ' ') ) Ref_demande
			,decode(:P_param6,'.CSV', DECODE(DPCOPI.DPCOPIAXEMETIER, NULL,(DECODE(PI.PROJAXEMETIER, NULL,(DECODE(CONSO.TACHEAXEMETIER,NULL,NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1), NULL,'???',DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER)AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1)) ))), DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1))) ) , DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER)  AND ROWNUM = 1)) ) , rpad(NVL(DECODE(DPCOPI.DPCOPIAXEMETIER, NULL,(DECODE(PI.PROJAXEMETIER, NULL,(DECODE(CONSO.TACHEAXEMETIER,NULL,NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1), NULL,'???',DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER)AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1)) ))), DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1))) ) , DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER)  AND ROWNUM = 1))),' ') , 80 , ' ' ) ) Ref_demandeLib
			,decode(:P_param6,'.CSV', (SELECT LIBTYET FROM TYPE_ETAPE WHERE etape.TYPETAP = TYPE_ETAPE.TYPETAP AND ROWNUM = 1) , rpad(NVL((SELECT LIBTYET FROM TYPE_ETAPE WHERE etape.TYPETAP = TYPE_ETAPE.TYPETAP AND ROWNUM = 1),' ') ,60,' ') ) TypeEtapeLib
			,decode(:P_param6,'.CSV', DPCOPI.DPCOPIAXEMETIER, rpad(NVL(DPCOPI.DPCOPIAXEMETIER,' '),12, ' ') ) DpCopiAxeMetierCode
			,decode(:P_param6,'.CSV', DECODE(DPCOPI.DPCOPIAXEMETIER, NULL,NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER) AND ROWNUM = 1)) ) , rpad(NVL(DECODE(DPCOPI.DPCOPIAXEMETIER, NULL,NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(DPCOPI.DPCOPIAXEMETIER) AND ROWNUM = 1)) ),' '),80, ' ') ) DpCopiAxeMetierLib
			,decode(:P_param6,'.CSV', PI.PROJAXEMETIER , rpad(NVL(PI.PROJAXEMETIER,' '),12, ' ') ) ProjAxeMetierCode
			,decode(:P_param6,'.CSV', DECODE(PI.PROJAXEMETIER, NULL, NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1))  ) , rpad(NVL(DECODE(PI.PROJAXEMETIER, NULL, NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(PI.PROJAXEMETIER) AND ROWNUM = 1)) ),' ') , 80 , ' ' ) ) ProjAxeMetierLib
			,decode(:P_param6,'.CSV', CONSO.TACHEAXEMETIER , rpad(NVL(CONSO.TACHEAXEMETIER,' '),12, ' ') ) TacheAxeMetierCode
			,decode(:P_param6,'.CSV', DECODE(CONSO.TACHEAXEMETIER, NULL, NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1))) , rpad(NVL(DECODE(CONSO.TACHEAXEMETIER, NULL, NULL, DECODE((SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1), NULL, '???', (SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM(DMPNUM) = TRIM(CONSO.TACHEAXEMETIER) AND ROWNUM = 1)) ),' ') , 80 , ' ' ) ) TacheAxeMetierLib 
    
    
    ,DECODE(:P_param6,'.TXT',CHR(13),NULL)  retour

FROM
    (SELECT      DECODE(tache.aistty, 'FF', tache.aistpid, tache.pid) factpid
        ,tache.pid
        ,decode (:P_param6,'.CSV',REPLACE(LTRIM(RTRIM(nvl(libetapetache.libsstache,tache.asnom)    )),'"','""'),nvl(libetapetache.libsstache,tache.asnom))  asnom
        , tache.ecet
        , tache.acta
        , tache.acst
        ,tache.aist
        --ZAA PPM 62324
        ,tache.tacheaxemetier
        --FIN ZAA PPM 62324
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 1, cons_sstache_res_mois.cusag, 0))    janvier
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 2, cons_sstache_res_mois.cusag, 0))    fevrier
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 3, cons_sstache_res_mois.cusag, 0))    mars
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 4, cons_sstache_res_mois.cusag, 0))    avril
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 5, cons_sstache_res_mois.cusag, 0))    mai
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 6, cons_sstache_res_mois.cusag, 0))    juin
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 7, cons_sstache_res_mois.cusag, 0))    juillet
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 8, cons_sstache_res_mois.cusag, 0))    aout
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 9, cons_sstache_res_mois.cusag, 0))    septembre
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 10, cons_sstache_res_mois.cusag, 0))    octobre
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 11, cons_sstache_res_mois.cusag, 0))    novembre
        , SUM(DECODE(TO_NUMBER(TO_CHAR(cons_sstache_res_mois.cdeb, 'MM')), 12, cons_sstache_res_mois.cusag, 0))    decembre
        ,situ_ress_full.ident
        ,situ_ress_full.codsg
        ,situ_ress_full.soccode
        ,situ_ress_full.niveau
        ,situ_ress_full.cout
        ,decode(libetapetache.libetape,'',libetapetachebips.etapelibel,libetapetache.libetape) libetape
		
		,decode(libetapetache.libtache,'',libetapetachebips.tachelibel,libetapetache.libtache) libtache
        --KRA PPM 60727
        ,libetapetache.date_deb_ini 
        ,libetapetache.date_fin_ini 
        ,libetapetache.date_deb_rev
        ,libetapetache.date_fin_rev
        ,libetapetache.statut_sstache
        ,libetapetache.duree_sstache
		,libetapetache.param_sstache
         --Fin KRA PPM 60727
        ,si1.cafi 
 
        , situ_ress_full.MODE_CONTRACTUEL_INDICATIF MCI
        , situ_ress_full.PRESTATION CODE_PRESTATION
        , ress.RTYPE TYPE_RESSOURCE
        , MAX(cons_sstache_res_mois.cdeb) cdeb
        
     FROM situ_ress_full
        , ligne_bip
        , tache
        , cons_sstache_res_mois
        , datdebex
		--KRA PPM 60727
        , (select ie.pid, ie.ecet,  ie.libetape, it.acta,  it.libtache, iss.asnom libsstache, iss.acst
            ,iss.ADEB date_deb_ini, 
            iss.AFIN  date_fin_ini, 
            iss.ANDE date_deb_rev,
            iss.ANFI date_fin_rev,
            iss.ASTA statut_sstache,
            iss.ADUR duree_sstache,
            iss.PARAM_LOCAL param_sstache from isac_etape ie, isac_tache it, isac_sous_tache iss where ie.etape=it.etape and ie.etape = iss.etape and it.tache = iss.tache ) libetapetache -- TD 712 
			--Fin KRA PPM 60727
			
		,(select lignebipcode, etapenum,  etapelibel, 
			tachenum,  tachelibel, 
			stachenum,
			stachelibel
            from BIPS_ACTIVITE bips  ) libetapetachebips
			
    -- annee courante
    ,struct_info si1
    ,RESSOURCE ress

	WHERE cons_sstache_res_mois.cdeb >= datdebex.datdebex
        
        AND ress.IDENT = situ_ress_full.ident
        -- jointure cons_sstache_res_mois / tache
        AND cons_sstache_res_mois.pid=tache.pid
        AND cons_sstache_res_mois.ecet=tache.ecet
        AND cons_sstache_res_mois.acta=tache.acta
        AND cons_sstache_res_mois.acst=tache.acst
        -- suppression de la ressource 0
        AND cons_sstache_res_mois.ident!=0
        -- il existe du consomme
        AND cons_sstache_res_mois.cusag!=0
        -- jointure tache / ligne_bip
        AND DECODE(tache.aistty, 'FF', tache.aistpid, tache.pid)=ligne_bip.pid
              -- jointure cons_sstache_res_mois / situ_ress_full pour avoir la qualif de la ressource
        AND cons_sstache_res_mois.ident=situ_ress_full.ident
        AND (cons_sstache_res_mois.cdeb>=situ_ress_full.datsitu OR situ_ress_full.datsitu IS NULL)
        AND (cons_sstache_res_mois.cdeb<=situ_ress_full.datdep OR situ_ress_full.datdep IS NULL)
        AND ( situ_ress_full.prestation not in ('GRA', 'MO', 'IFO', 'INT', 'STA') or situ_ress_full.prestation is null)
        --TD 712 
        and tache.pid = libetapetache.pid(+)
        and tache.ecet = libetapetache.ecet(+)
        and tache.acta = libetapetache.acta(+)
        and tache.acst = libetapetache.acst(+)
		
		and tache.pid = libetapetachebips.lignebipcode(+)
        and tache.ecet = libetapetachebips.etapenum(+)
        and tache.acta = libetapetachebips.tachenum(+)
        and tache.acst = libetapetachebips.stachenum(+)

    -- par ressource, mois, pid et sous-tache
       and si1.codsg = situ_ress_full.codsg
    GROUP BY
        tache.pid
        ,DECODE(tache.aistty, 'FF', tache.aistpid, tache.pid)
        ,tache.asnom
        , tache.ecet
        , tache.acta
        , tache.acst
        ,tache.aist
        --ZAA PPM 62324
        ,tache.tacheaxemetier
        -- FIN ZAA PPM 62324
        ,situ_ress_full.ident,situ_ress_full.codsg,situ_ress_full.soccode, situ_ress_full.niveau, situ_ress_full.cout
          ,libetapetache.libetape -- TD 712 
        ,libetapetache.libtache -- TD 712 
        ,libetapetache.libsstache
		
		,libetapetachebips.etapelibel
		,libetapetachebips.tachelibel
		,libetapetachebips.stachelibel
		
        ,si1.cafi 
        
        , situ_ress_full.MODE_CONTRACTUEL_INDICATIF
        , situ_ress_full.PRESTATION
        , ress.RTYPE
        --KRA PPM 60727
        ,libetapetache.date_deb_ini
        ,libetapetache.date_fin_ini
        ,libetapetache.date_deb_rev
        ,libetapetache.date_fin_rev
        ,libetapetache.statut_sstache
        ,libetapetache.duree_sstache
		,libetapetache.param_sstache
        --Fin KRA PPM 60727

    ) CONSO
            ,ligne_bip
            ,etape
            , proj_info PI
            , ressource
            , struct_info
            , directions
            , datdebex
            , dossier_projet
--ZAA PPM 62324
			,DOSSIER_PROJET_COPI DPCOPI
-- FIN ZAA PPM 62324
            &p_from
WHERE
    -- jointure tache <-> etape
        CONSO.ecet = etape.ecet
        AND CONSO.pid = etape.pid
    -- jointure tache <-> ligne_bip avec prise en compte de la sous-traitance
            AND  ligne_bip.pid =CONSO.factpid
    -- jointure ligne_bip <-> proj_info
            AND PI.icpi=ligne_bip.icpi
    -- jointure ligne_bip <-> struct_info <-> directions
            AND ligne_bip.codsg=struct_info.codsg
            AND struct_info.coddir=directions.coddir
    -- jointure ressource/CONSO
             AND CONSO.ident=ressource.ident
AND ligne_bip.dpcode = dossier_projet.dpcode
--ZAA PPM 62324
and PI.dp_copi = DPCOPI.dp_copi(+)
-- FIN ZAA PPM 62324
&p_where
        --ORDER BY RessCode,LigneCode,EtapeCode,TacheCode,SoustacheCode;
		order by LigneCode,
LigneLib,
LigneTypePrin,
LigneTypeSec,
LigneDpgCode,
LigneDpgLib,
LigneDepPoleLib,
LigneDpgDirLib,
CliPrinCode,
CliPrinLib,
CliPrinBrancheLib,
CliOperCode,
CliOperLib,
LigneMetierCode,
DPCode,
DPLib,
DPCOPICode,
DPCOPILib,
ProjCode,
ProjLib,
CADA,
AppliCode,
CApayeurCode,
LigneSAISIECode,
EtapeType,
EtapeCode,
EtapeLib,
TacheCode,
TacheLib,
SoustacheCode,
SoustacheType,
SoustacheLib,
LigneCateg,
LigneSAISIECateg,
RessNom,
RessPrenom,
RessMatricule,
RessIGG,
RessCode,
RessDpgCode,
RessDpgLib,
RessIntExt,
RessSteCode,
RessType,
RessPrestationCode,
MciCode,
MciLib,
Consomme_janv,
Consomme_fevr,
Consomme_mars,
Consomme_avri,
Consomme_mai,
Consomme_juin,
Consomme_juil,
Consomme_aout,
Consomme_sept,
Consomme_octo,
Consomme_nove,
Consomme_dece,
Consomme_AA,
CoutFtHTR,
CoutEnvHTR,
RessCAFI,
ProfilFI,
StacheInitDebDate,
StacheInitFinDate,
StacheRevDebDate,
StacheRevFinDate,
StacheStatut,
StacheDuree,
StacheParamLocal,
Ref_demande,
Ref_demandeLib,
TypeEtapeLib,
DpCopiAxeMetierCode,
DpCopiAxeMetierLib,
ProjAxeMetierCode,
ProjAxeMetierLib,
TacheAxeMetierCode,
TacheAxeMetierLib;

]]>
      </select>
      <displayInfo x="1.41663" y="0.04175" width="0.69995" height="0.19995"/>
      <group name="G_libelle_projet">
        <displayInfo x="2.35803" y="0.61462" width="2.51685" height="7.95020"
        />

        <dataItem name="LigneCode" datatype="vchar2" columnOrder="11"
         width="94" defaultWidth="30000" defaultHeight="10000" columnFlags="0"
         defaultLabel="LigneCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( ligne_bip.pid , 4 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneCode" order="1" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="LigneLib" datatype="vchar2" columnOrder="12"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.pnom , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneLib" order="2" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="LigneTypePrin" datatype="vchar2" columnOrder="13"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneTypePrin" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneTypePrin&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.TYPPROJ , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneTypePrin" order="3" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneTypeSec" datatype="vchar2" columnOrder="14"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneTypeSec" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneTypeSec&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.ARCTYPE , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneTypeSec" order="4" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneDpgCode" datatype="vchar2" columnOrder="15"
         width="94" defaultWidth="60000" defaultHeight="10000" columnFlags="0"
         defaultLabel="LigneDpgCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneDpgCode&quot;"/>
          <dataDescriptor expression="lpad ( TO_CHAR ( DPG_ligne ) , 7 , &apos;0&apos; )"
           descriptiveExpression="LigneDpgCode" order="5" width="7"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneDpgLib" datatype="vchar2" columnOrder="16"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneDpgLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneDpgLib&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.ARCTYPE , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneDpgLib" order="6" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneDepPoleLib" datatype="vchar2" columnOrder="17"
         width="94" defaultWidth="70000" defaultHeight="10000" columnFlags="0"
         defaultLabel="LigneDepPoleLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneDepPoleLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( struct_info.sigdep || &apos;/&apos; || struct_info.sigpole , 7 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneDepPoleLib" order="7" width="71"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneDpgDirLib" datatype="vchar2" columnOrder="18"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneDpgDirLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneDpgDirLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( directions.libdir , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneDpgDirLib" order="8" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CliPrinCode" datatype="vchar2" columnOrder="19"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="CliPrinCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;CliPrinCode&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.CLICODE , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CliPrinCode" order="9" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CliPrinLib" datatype="vchar2" columnOrder="20"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="CliPrinLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;CliPrinLib&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( (SELECT CLILIB FROM CLIENT_MO WHERE CLICODE = ligne_bip.CLICODE ) , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CliPrinLib" order="10" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CliPrinBrancheLib" datatype="vchar2" columnOrder="21"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="CliPrinBrancheLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;CliPrinBrancheLib&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( (SELECT CLILIB FROM CLIENT_MO WHERE CLICODE = ligne_bip.CLICODE ) , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CliPrinBrancheLib" order="11" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CliOperCode" datatype="vchar2" columnOrder="22"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="CliOperCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;CliOperCode&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( (SELECT CLILIB FROM CLIENT_MO WHERE CLICODE = ligne_bip.CLICODE ) , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CliOperCode" order="12" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CliOperLib" datatype="vchar2" columnOrder="23"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="CliOperLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;CliOperLib&quot;"/>
          <dataDescriptor
		   expression=": P_SEPARATEUR || rpad ( nvl ( (SELECT CLILIB FROM CLIENT_MO WHERE CLICODE = ligne_bip.CLICODE ) , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CliOperLib" order="13" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneMetierCode" datatype="vchar2" columnOrder="24" width="94"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="LigneMetierCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneMetierCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.metier , &apos; &apos; ) , 3 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneMetierCode" order="14" width="67"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="DPCode" datatype="vchar2" columnOrder="25" width="94" defaultWidth="100000"
         defaultHeight="10000" columnFlags="0"
         defaultLabel="DPCode" breakOrder="none">
          <xmlSettings xmlTag="DPCode"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( ligne_bip.dpcode ) , &apos;0&apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="DPCode" order="15" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="DPLib" datatype="vchar2" columnOrder="26" width="94" defaultWidth="100000"
         defaultHeight="10000" columnFlags="0"
         defaultLabel="DPLib" breakOrder="none">
          <xmlSettings xmlTag="DPLib"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( ligne_bip.dpcode ) , &apos;0&apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="DPLib" order="16" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="DPCOPICode" datatype="vchar2" columnOrder="27" width="94" defaultWidth="100000"
         defaultHeight="10000" columnFlags="0"
         defaultLabel="DPCOPICode" breakOrder="none">
          <xmlSettings xmlTag="DPCOPICode"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( ligne_bip.dpcode ) , &apos;0&apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="DPCOPICode" order="17" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="DPCOPILib" datatype="vchar2" columnOrder="28" width="94" defaultWidth="100000"
         defaultHeight="10000" columnFlags="0"
         defaultLabel="DPCOPILib" breakOrder="none">
          <xmlSettings xmlTag="DPCOPILib"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( ligne_bip.dpcode ) , &apos;0&apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="DPCOPILib" order="18" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="ProjCode" datatype="vchar2" columnOrder="29"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="ProjCode" breakOrder="none">
          <xmlSettings xmlTag="ProjCode"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.icpi , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="ProjCode" order="19" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="ProjLib" datatype="vchar2" columnOrder="30"
         width="114" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="ProjLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;ProjLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( proj_info.ilibel , &apos; &apos; ) , 50 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="ProjLib" order="20" width="114"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CADA" datatype="vchar2" columnOrder="31" width="94"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="CADA" breakOrder="none">
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( proj_info.cada ) , &apos; &apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CADA" order="21" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="AppliCode" datatype="vchar2" columnOrder="32"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="AppliCode" breakOrder="none">
          <xmlSettings xmlTag="AppliCode"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( ligne_bip.airt , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="AppliCode" order="22" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CApayeurCode" datatype="vchar2" columnOrder="33"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="CApayeurCode" breakOrder="none">
          <xmlSettings xmlTag="CApayeurCode"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( ligne_bip.codcamo ) , &apos; &apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="CApayeurCode" order="23" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneSAISIECode" datatype="vchar2" columnOrder="34"
         width="94" defaultWidth="30000" defaultHeight="10000" columnFlags="0"
         defaultLabel="LigneSAISIECode" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneSAISIECode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( CONSO.pid , 4 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneSAISIECode" order="24" width="68"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="EtapeType" datatype="vchar2" columnOrder="35" width="94"
         defaultWidth="20000" defaultHeight="10000" columnFlags="0"
         defaultLabel="EtapeType" breakOrder="none">
          <xmlSettings xmlTag="&quot;EtapeType&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( etape.TYPETAP , &apos; &apos; ) , 2 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="EtapeType" order="25" width="66"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="EtapeCode" datatype="vchar2" columnOrder="36" width="94"
         defaultWidth="20000" defaultHeight="10000" columnFlags="0"
         defaultLabel="EtapeCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;EtapeCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.ecet , &apos; &apos; ) , 2 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="EtapeCode" order="26" width="66"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="EtapeLib" datatype="vchar2" columnOrder="37"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="1" defaultLabel="EtapeLib">
          <xmlSettings xmlTag="&quot;EtapeLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.libetape , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="EtapeLib" order="27" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="TacheCode" datatype="vchar2" columnOrder="38" width="66"
         defaultWidth="20000" defaultHeight="10000" columnFlags="0"
         defaultLabel="TacheCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;TacheCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.acta , &apos; &apos; ) , 2 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="TacheCode" order="28" width="66"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="TacheLib" datatype="vchar2" columnOrder="39"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="1" defaultLabel="TacheLib">
          <xmlSettings xmlTag="&quot;TacheLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.libtache , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="TacheLib" order="29" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="SoustacheCode" datatype="vchar2" columnOrder="40"
         width="66" defaultWidth="20000" defaultHeight="10000" columnFlags="0"
         defaultLabel="SoustacheCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;SoustacheCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.acst , &apos; &apos; ) , 2 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="SoustacheCode" order="30" width="66"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="SoustacheType" datatype="vchar2" columnOrder="41"
         width="70" defaultWidth="60000" defaultHeight="10000" columnFlags="0"
         defaultLabel="SoustacheType" breakOrder="none">
          <xmlSettings xmlTag="&quot;SoustacheType&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.aist , &apos; &apos; ) , 6 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="SoustacheType" order="31" width="70"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="SoustacheLib" datatype="vchar2" columnOrder="42"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="SoustacheLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;SoustacheLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.asnom , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="SoustacheLib" order="32" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneCateg" datatype="vchar2" columnOrder="43"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneCateg" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneCateg&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.asnom , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneCateg" order="33" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="LigneSAISIECateg" datatype="vchar2" columnOrder="44"
         width="94" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="LigneSAISIECateg" breakOrder="none">
          <xmlSettings xmlTag="&quot;LigneSAISIECateg&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.asnom , &apos; &apos; ) , 30 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="LigneSAISIECateg" order="34" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessNom" datatype="vchar2" columnOrder="45" width="94"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessNom" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessNom&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || DECODE ( : P_PARAM0 , &apos;fournisseur&apos; , DECODE ( pack_habilitation.isDpgMe ( CONSO.codsg , : P_PERIM_ME ) , &apos;O&apos; , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) , DECODE ( pack_habilitation.isPerimCafi ( conso.cafi , : P_PERIM_CAFI ) , &apos;N&apos; , RPAD ( &apos; &apos; , 30 , &apos; &apos; ) , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) ) ) , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessNom" order="35" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessPrenom" datatype="vchar2" columnOrder="46" width="94"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessPrenom" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessPrenom&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || DECODE ( : P_PARAM0 , &apos;fournisseur&apos; , DECODE ( pack_habilitation.isDpgMe ( CONSO.codsg , : P_PERIM_ME ) , &apos;O&apos; , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) , DECODE ( pack_habilitation.isPerimCafi ( conso.cafi , : P_PERIM_CAFI ) , &apos;N&apos; , RPAD ( &apos; &apos; , 30 , &apos; &apos; ) , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) ) ) , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessPrenom" order="36" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessMatricule" datatype="vchar2" columnOrder="47" width="94"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessMatricule" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessMatricule&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || DECODE ( : P_PARAM0 , &apos;fournisseur&apos; , DECODE ( pack_habilitation.isDpgMe ( CONSO.codsg , : P_PERIM_ME ) , &apos;O&apos; , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) , DECODE ( pack_habilitation.isPerimCafi ( conso.cafi , : P_PERIM_CAFI ) , &apos;N&apos; , RPAD ( &apos; &apos; , 30 , &apos; &apos; ) , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) ) ) , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessMatricule" order="37" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessIGG" datatype="vchar2" columnOrder="48" width="94"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessIGG" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessIGG&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || DECODE ( : P_PARAM0 , &apos;fournisseur&apos; , DECODE ( pack_habilitation.isDpgMe ( CONSO.codsg , : P_PERIM_ME ) , &apos;O&apos; , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) , DECODE ( pack_habilitation.isPerimCafi ( conso.cafi , : P_PERIM_CAFI ) , &apos;N&apos; , RPAD ( &apos; &apos; , 30 , &apos; &apos; ) , rpad ( nvl ( ressource.rnom , &apos; &apos; ) , 30 , &apos; &apos; ) ) ) , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessIGG" order="38" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessCode" datatype="vchar2" columnOrder="49" width="94"
         defaultWidth="50000" defaultHeight="10000" columnFlags="1"
         defaultLabel="RessCode">
          <xmlSettings xmlTag="&quot;RessCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( CONSO.ident ) , &apos; &apos; ) , 5 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessCode" order="39" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessDpgCode" datatype="vchar2" columnOrder="50"
         width="72" defaultWidth="70000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessDpgCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessDpgCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || to_char ( rpad ( nvl ( CONSO.codsg , 0 ) , 7 , &apos; &apos; ) , &apos;FM0000000&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessDpgCode" order="40" width="72"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessDpgLib" datatype="vchar2" columnOrder="51"
         width="72" defaultWidth="70000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessDpgLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessDpgLib&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || to_char ( rpad ( nvl ( CONSO.codsg , 0 ) , 7 , &apos; &apos; ) , &apos;FM0000000&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessDpgLib" order="41" width="72"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessIntExt" datatype="vchar2" columnOrder="52"
         width="72" defaultWidth="70000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessIntExt" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessIntExt&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || to_char ( rpad ( nvl ( CONSO.codsg , 0 ) , 7 , &apos; &apos; ) , &apos;FM0000000&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessIntExt" order="42" width="72"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessSteCode" datatype="vchar2" columnOrder="53"
         width="68" defaultWidth="40000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessSteCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessSteCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.soccode , &apos; &apos; ) , 4 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessSteCode" order="43" width="68"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessType" datatype="vchar2" columnOrder="54"
         width="68" defaultWidth="40000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessType" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessType&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.soccode , &apos; &apos; ) , 4 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessType" order="44" width="68"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="RessPrestationCode" datatype="vchar2" columnOrder="55"
         width="68" defaultWidth="40000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessPrestationCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;RessPrestationCode&quot;"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || rpad ( nvl ( CONSO.soccode , &apos; &apos; ) , 4 , &apos; &apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessPrestationCode" order="45" width="68"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="MciCode" datatype="vchar2" columnOrder="56" width="94"
         defaultWidth="50000" defaultHeight="10000" columnFlags="1"
         defaultLabel="MciCode">
          <xmlSettings xmlTag="MciCode"/>
          <dataDescriptor
           expression="rpad ( nvl ( MCI , &apos; &apos; ) , 3 , &apos; &apos; )"
           descriptiveExpression="MciCode" order="46" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="MciLib" datatype="vchar2" columnOrder="57" width="94"
         defaultWidth="50000" defaultHeight="10000" columnFlags="1"
         defaultLabel="MciLib">
          <xmlSettings xmlTag="MciLib"/>
          <dataDescriptor
           expression="rpad ( nvl ( MCI , &apos; &apos; ) , 3 , &apos; &apos; )"
           descriptiveExpression="MciLib" order="47" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="Consomme_janv" datatype="vchar2" columnOrder="58" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_janv" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_janv&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.janvier , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.janvier , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_janv" order="48" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_fevr" datatype="vchar2" columnOrder="59" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_fevr" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_fevr&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.fevrier , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.fevrier , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_fevr" order="49" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_mars" datatype="vchar2" columnOrder="60" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_mars" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_mars&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.mars , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.mars , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_mars" order="50" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_avri" datatype="vchar2" columnOrder="61" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_avri" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_avri&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.avril , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.avril , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_avri" order="51" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_mai" datatype="vchar2" columnOrder="62" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_mai" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_mai&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.mai , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.mai , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_mai" order="52" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_juin" datatype="vchar2" columnOrder="63" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_juin" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_juin&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.juin , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.juin , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_juin" order="53" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_juil" datatype="vchar2" columnOrder="64" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_juil" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_juil&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.juillet , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.juillet , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_juil" order="54" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_aout" datatype="vchar2" columnOrder="65" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_aout" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_aout&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.aout , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.aout , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_aout" order="55" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_sept" datatype="vchar2" columnOrder="66"
         width="10" defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_sept" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_sept&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.septembre , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.septembre , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_sept" order="56" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_octo" datatype="vchar2" columnOrder="67" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_octo" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_octo&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.octobre , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.octobre , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_octo" order="57" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_nove" datatype="vchar2" columnOrder="68" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_nove" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_nove&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.novembre , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.novembre , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_nove" order="58" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="Consomme_dece" datatype="vchar2" columnOrder="69" width="10"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_dece" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_dece&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.decembre , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.decembre , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_dece" order="59" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="Consomme_AA" datatype="vchar2" columnOrder="70" width="12"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Consomme_AA" breakOrder="none">
          <xmlSettings xmlTag="&quot;Consomme_AA&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( CONSO.decembre , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( CONSO.decembre , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="Consomme_AA" order="60" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="CoutFtHTR" datatype="vchar2" columnOrder="71" width="13"
         defaultWidth="90000" defaultHeight="10000" columnFlags="0"
         defaultLabel="CoutFtHTR" breakOrder="none">
          <xmlSettings xmlTag="&quot;CoutFtHTR&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( pack_utile_cout.getCoutHTR_STD_FI ( CONSO.soccode , ressource.rtype , ligne_bip.metier , conso.niveau , CONSO.codsg , CONSO.cout , TO_CHAR ( CONSO.cdeb , &apos;DDMMYYYY&apos; ) , struct_info.filcode , CODE_PRESTATION , CONSO.ident , CONSO.CAFI, ligne_bip.CODCAMO ) , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( pack_utile_cout.getCoutHTR_STD_FI ( CONSO.soccode , ressource.rtype , ligne_bip.metier , conso.niveau , CONSO.codsg , CONSO.cout , TO_CHAR ( CONSO.cdeb , &apos;DDMMYYYY&apos; ) , struct_info.filcode , CODE_PRESTATION , CONSO.ident , CONSO.CAFI, ligne_bip.CODCAMO ) , &apos;FM00000.00&apos; ) , to_char ( 0 , &apos;FM00000.00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="CoutFtHTR" order="61" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="CoutEnvHTR" datatype="vchar2" columnOrder="72" width="13"
         defaultWidth="90000" defaultHeight="10000" columnFlags="0"
         defaultLabel="CoutEnvHTR" breakOrder="none">
          <xmlSettings xmlTag="CoutEnvHTR" xmlTagAttrs="&quot;CoutEnvHTR&quot;"/>
          <dataDescriptor
           expression="decode ( : P_param6 , &apos;.CSV&apos; , lpad ( nvl ( to_char ( pack_utile_cout.getCoutEnvHTR_Generique (CONSO.codsg , CONSO.cafi , CODE_PRESTATION , CONSO.ident , TO_CHAR ( CONSO.cdeb , &apos;DDMMYYYY&apos; ) , CONSO.soccode , ressource.rtype , ligne_bip.metier , conso.niveau, ligne_bip.codcamo, :P_ANNEE, struct_info.filcode ) , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) , lpad ( NVL ( TO_CHAR ( pack_utile_cout.getCoutEnvHTR_Generique (CONSO.codsg , CONSO.cafi , CODE_PRESTATION , CONSO.ident , TO_CHAR ( CONSO.cdeb , &apos;DDMMYYYY&apos; ) , CONSO.soccode , ressource.rtype , ligne_bip.metier , conso.niveau, ligne_bip.codcamo, :P_ANNEE, struct_info.filcode ) , &apos;FM99990D00&apos; ) , to_char ( 0 , &apos;FM99990D00&apos; ) ) , 8 , &apos; &apos; ) )"
           descriptiveExpression="CoutEnvHTR" order="62" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="RessCAFI" datatype="vchar2" columnOrder="73" width="73"
         defaultWidth="80000" defaultHeight="10000" columnFlags="0"
         defaultLabel="RessCAFI" breakOrder="none">
          <xmlSettings xmlTag="RessCAFI"/>
          <dataDescriptor
           expression=": P_SEPARATEUR || lpad ( nvl ( to_char ( conso.cafi ) , &apos; &apos; ) , 5 , &apos;0&apos; ) || : P_SEPARATEUR"
           descriptiveExpression="RessCAFI" order="63" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="ProfilFI" datatype="vchar2" columnOrder="74"
         width="4000" defaultWidth="100000" defaultHeight="10000"
         columnFlags="1" defaultLabel="ProfilFI">
          <xmlSettings xmlTag="ProfilFI"/>
          <dataDescriptor
           expression="rpad ( nvl ( DECODE ( : P_PARAM0 , &apos;fournisseur&apos; , DECODE ( pack_habilitation.isDpgMe ( CONSO.codsg , : P_PERIM_ME ) , &apos;O&apos; , DECODE ( : P_SMENUS_GES , &apos;O&apos; , NVL ( pack_utile_cout.Get_Profil_Fi ( CONSO.codsg , CONSO.cafi , CODE_PRESTATION , CONSO.ident , TO_CHAR ( CONSO.cdeb , &apos;DDMMYYYY&apos; ) , CONSO.soccode , ressource.rtype , ligne_bip.metier , conso.niveau , ligne_bip.codcamo ) , &apos; &apos; ) , &apos; &apos; ) , DECODE ( pack_habilitation.isPerimCafi ( conso.cafi , : P_PERIM_CAFI ) , &apos;N&apos; , &apos; &apos; , DECODE ( : P_SMENUS_GES , &apos;O&apos; , NVL ( pack_utile_cout.Get_Profil_Fi ( CONSO.codsg , CONSO.cafi , CODE_PRESTATION , CONSO.ident , TO_CHAR ( CONSO.cdeb , &apos;DDMMYYYY&apos; ) , CONSO.soccode , ressource.rtype , ligne_bip.metier , conso.niveau, ligne_bip.codcamo ) , &apos; &apos; ) , &apos; &apos; ) ) ) , &apos; &apos; ) , &apos; &apos; ) , 12 , &apos; &apos; )"
           descriptiveExpression="ProfilFI" order="64" width="4000"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="StacheInitDebDate" datatype="vchar2"
         columnOrder="75" width="10" defaultWidth="100000"
         defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheInitDebDate">
          <xmlSettings xmlTag="StacheInitDebDate"/>
          <dataDescriptor expression="rpad ( NVL ( TO_CHAR ( CONSO.date_deb_ini , 'DD/MM/YYYY' ) , &apos; &apos; ), 10 , &apos; &apos; )"
           descriptiveExpression="StacheInitDebDate" order="65"
           oracleDatatype="date" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="StacheInitFinDate" datatype="vchar2"
         columnOrder="76" width="10" defaultWidth="100000"
         defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheInitFinDate">
          <xmlSettings xmlTag="StacheInitFinDate"/>
          <dataDescriptor expression="rpad ( NVL ( TO_CHAR ( CONSO.date_fin_ini , 'DD/MM/YYYY' ) , &apos; &apos; ), 10 , &apos; &apos; )"
           descriptiveExpression="StacheInitFinDate" order="66"
           oracleDatatype="date" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="StacheRevDebDate" datatype="vchar2"
         columnOrder="77" width="10" defaultWidth="100000"
         defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheRevDebDate">
          <xmlSettings xmlTag="StacheRevDebDate"/>
          <dataDescriptor expression="rpad ( NVL ( TO_CHAR ( CONSO.date_deb_rev , 'DD/MM/YYYY' ) , &apos; &apos; ), 10 , &apos; &apos; )"
           descriptiveExpression="StacheRevDebDate" order="67"
           oracleDatatype="date" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="StacheRevFinDate" datatype="vchar2"
         columnOrder="78" width="10" defaultWidth="100000"
         defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheRevFinDate">
          <xmlSettings xmlTag="StacheRevFinDate"/>
          <dataDescriptor expression="rpad ( NVL ( TO_CHAR ( CONSO.date_fin_rev , 'DD/MM/YYYY' ) , &apos; &apos; ), 10 , &apos; &apos; )"
           descriptiveExpression="StacheRevFinDate" order="68"
           oracleDatatype="date" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="StacheStatut" datatype="character"
         columnOrder="79" width="2"
         defaultWidth="20000" defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheStatut">
          <xmlSettings xmlTag="StacheStatut"/>
          <dataDescriptor expression="rpad ( nvl ( CONSO.statut_sstache , &apos; &apos; ) , 2 , &apos; &apos; )"
           descriptiveExpression="STATUT_SSTACHE" order="69" width="2"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="StacheDuree" datatype="vchar2"
         columnOrder="80" width="5" defaultWidth="50000"
         defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheDuree">
          <xmlSettings xmlTag="StacheDuree"/>
          <dataDescriptor expression="lpad ( NVL ( TO_CHAR ( CONSO.duree_sstache ) , &apos; &apos;  ) , 5 , &apos; &apos; )"
           descriptiveExpression="StacheDuree" order="70"
           oracleDatatype="number" width="5" precision="5"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="StacheParamLocal" datatype="vchar2" columnOrder="81"
         width="5" defaultWidth="50000" defaultHeight="10000" columnFlags="1"
         defaultLabel="StacheParamLocal">
          <xmlSettings xmlTag="StacheParamLocal"/>
          <dataDescriptor expression="rpad ( nvl ( CONSO.param_sstache , &apos; &apos; ) , 5 , &apos; &apos; )"
           descriptiveExpression="StacheParamLocal" order="71" width="5"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="Ref_demande" datatype="vchar2" columnOrder="82" width="50"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Ref_demande" breakOrder="none">
          <xmlSettings xmlTag="&quot;Ref_demande&quot;"/>
          <dataDescriptor		
		   expression="decode( : P_param6 , &apos;.CSV&apos; , DECODE ( DPCOPI.DPCOPIAXEMETIER, NULL, ( DECODE ( PI.PROJAXEMETIER, NULL, ( DECODE ( CONSO.TACHEAXEMETIER, NULL, NULL, CONSO.TACHEAXEMETIER )  ) , PI.PROJAXEMETIER )  ) , DPCOPI.DPCOPIAXEMETIER ) , rpad( NVL ( DECODE ( DPCOPI.DPCOPIAXEMETIER, NULL, ( DECODE ( PI.PROJAXEMETIER, NULL, ( DECODE ( CONSO.TACHEAXEMETIER, NULL, NULL, CONSO.TACHEAXEMETIER )  ) , PI.PROJAXEMETIER )  ) , DPCOPI.DPCOPIAXEMETIER ) ,&apos; &apos; ) ,12, &apos; &apos; ) )"
		   descriptiveExpression="REF_DEMANDE" order="72" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="Ref_demandeLib" datatype="vchar2" columnOrder="83" width="80"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Ref_demandeLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;Ref_demandeLib&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , DECODE ( DPCOPI.DPCOPIAXEMETIER, NULL, ( DECODE ( PI.PROJAXEMETIER, NULL, ( DECODE ( CONSO.TACHEAXEMETIER,NULL,NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 ) , NULL,&apos;???&apos;,DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER ) AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 )  )   )  )  ) , DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 )  )  )   )  , DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER ) AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER )  AND ROWNUM = 1)  ) ) , rpad ( NVL ( DECODE ( DPCOPI.DPCOPIAXEMETIER, NULL, ( DECODE ( PI.PROJAXEMETIER, NULL, ( DECODE ( CONSO.TACHEAXEMETIER,NULL,NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 ) , NULL,&apos;???&apos;,DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER ) AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 )  )   )  )  ) , DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 )  )  )   )  , DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER ) AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER )  AND ROWNUM = 1)  )  ) ,&apos; &apos; )  , 80 , &apos; &apos;  ) )"
		   descriptiveExpression="REF_DEMANDELIB" order="73" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>

		<dataItem name="TypeEtapeLib" datatype="vchar2" columnOrder="84" width="60"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="TypeEtapeLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;TypeEtapeLib&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , ( SELECT LIBTYET FROM TYPE_ETAPE WHERE etape.TYPETAP = TYPE_ETAPE.TYPETAP AND ROWNUM = 1 ) , rpad ( NVL ( ( SELECT LIBTYET FROM TYPE_ETAPE WHERE etape.TYPETAP = TYPE_ETAPE.TYPETAP AND ROWNUM = 1 ) ,&apos; &apos; )  ,60,&apos; &apos; ) )"
		   descriptiveExpression="TYPE_ETAPE_LIB" order="74" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		
		<dataItem name="DpCopiAxeMetierCode" datatype="vchar2" columnOrder="85" width="50"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="DpCopiAxeMetierCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;DpCopiAxeMetierCode&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , DPCOPI.DPCOPIAXEMETIER , rpad ( NVL ( DPCOPI.DPCOPIAXEMETIER,&apos; &apos; ) ,12, &apos; &apos; ) )"
		   descriptiveExpression="DPCOPIAXEMETIERCODE" order="75" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>

		<dataItem name="DpCopiAxeMetierLib" datatype="vchar2" columnOrder="86" width="80"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="DpCopiAxeMetierLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;DpCopiAxeMetierLib&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , DECODE ( DPCOPI.DPCOPIAXEMETIER, NULL,NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER ) AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER ) AND ROWNUM = 1 )  ) ) , rpad ( NVL ( DECODE ( DPCOPI.DPCOPIAXEMETIER, NULL,NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER ) AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( DPCOPI.DPCOPIAXEMETIER ) AND ROWNUM = 1 )  )   ) ,&apos; &apos; ) ,80, &apos; &apos; ) )"
		   descriptiveExpression="DPCOPIAXEMETIERLIB" order="76" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>

		<dataItem name="ProjAxeMetierCode" datatype="vchar2" columnOrder="87" width="50"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="ProjAxeMetierCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;ProjAxeMetierCode&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , PI.PROJAXEMETIER , rpad ( NVL ( PI.PROJAXEMETIER,&apos; &apos; ) ,12, &apos; &apos; ) )"
		   descriptiveExpression="PROJAXEMETIERCODE" order="77" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>

		<dataItem name="ProjAxeMetierLib" datatype="vchar2" columnOrder="88" width="80"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="ProjAxeMetierLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;ProjAxeMetierLib&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , DECODE ( PI.PROJAXEMETIER, NULL, NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 )  ) ) , rpad ( NVL ( DECODE ( PI.PROJAXEMETIER, NULL, NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( PI.PROJAXEMETIER )  AND ROWNUM = 1 )  )   ) ,&apos; &apos; )  , 80 , &apos; &apos;  ) )"
		   descriptiveExpression="PROJAXEMETIERLIB" order="78" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		
		<dataItem name="TacheAxeMetierCode" datatype="vchar2" columnOrder="89" width="50"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="TacheAxeMetierCode" breakOrder="none">
          <xmlSettings xmlTag="&quot;TacheAxeMetierCode&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , CONSO.TACHEAXEMETIER , rpad ( NVL ( CONSO.TACHEAXEMETIER,&apos; &apos; ) ,12, &apos; &apos; ) )"
		   descriptiveExpression="TACHEAXEMETIERCODE" order="79" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>

		<dataItem name="TacheAxeMetierLib" datatype="vchar2" columnOrder="90" width="80"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="TacheAxeMetierLib" breakOrder="none">
          <xmlSettings xmlTag="&quot;TacheAxeMetierLib&quot;"/>
          <dataDescriptor
		   expression="decode( : P_param6 , &apos;.CSV&apos; , DECODE ( CONSO.TACHEAXEMETIER, NULL, NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 )  )   ) , rpad ( NVL ( DECODE ( CONSO.TACHEAXEMETIER, NULL, NULL, DECODE (  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 ) , NULL, &apos;???&apos;,  ( SELECT DMPLIBEL FROM DMP_RESEAUXFRANCE WHERE TRIM ( DMPNUM )  = TRIM ( CONSO.TACHEAXEMETIER )  AND ROWNUM = 1 )  )   ) ,&apos; &apos; )  , 80 , &apos; &apos;  )  )"
		   descriptiveExpression="TACHEAXEMETIERLIB" order="80" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
		<dataItem name="retour" datatype="vchar2" columnOrder="91" width="1"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Retour" breakOrder="none">
          <xmlSettings xmlTag=""/>
          <dataDescriptor
           expression="DECODE ( : P_param6 , &apos;.TXT&apos; , CHR ( 13 ) , NULL )"
           descriptiveExpression="RETOUR" order="81" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>

        <!-- <dataItem name="TYPE_RESSOURCE" datatype="character"
         oracleDatatype="aFixedChar" columnOrder="67" width="1"
         defaultWidth="10000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Type Ressource">
          <xmlSettings xmlTag="Type de ressource"/>
          <dataDescriptor expression="TYPE_RESSOURCE"
           descriptiveExpression="TYPE_RESSOURCE" order="41"
           oracleDatatype="aFixedChar" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="CODE_PRESTATION" datatype="character"
         oracleDatatype="aFixedChar" columnOrder="68" width="94"
         defaultWidth="30000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Code Prestation">
          <xmlSettings xmlTag="Code prestation"/>
          <dataDescriptor expression="CODE_PRESTATION"
           descriptiveExpression="CODE_PRESTATION" order="42"
           oracleDatatype="aFixedChar" width="94"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem> -->

      </group>
    </dataSource>
  </data>
  <layout>
  <section name="main">
    <body>
      <frame name="M_G_libelle_projet_GRPFR">
        <geometryInfo x="0.00000" y="0.00000" width="1.87500" height="0.37500"
        />
        <generalLayout verticalElasticity="variable"/>
        <repeatingFrame name="R_G_libelle_projet" source="G_libelle_projet"
         printDirection="down" minWidowRecords="1" columnMode="no">
          <geometryInfo x="0.00000" y="0.18750" width="1.87500"
           height="0.18750"/>
          <generalLayout verticalElasticity="expand"/>
          <field name="F_code_BIP" source="LigneCode" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="0.00000" y="0.18750" width="0.68750"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_libelle_projet" source="ProjLib"
           minWidowLines="1" spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="0.68750" y="0.18750" width="1.18750"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
        </repeatingFrame>
        <frame name="M_G_libelle_projet_HDR">
          <geometryInfo x="0.00000" y="0.00000" width="1.87500"
           height="0.18750"/>
          <advancedLayout printObjectOnPage="allPage"
           basePrintingOn="anchoringObject"/>
          <text name="B_code_BIP" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="0.00000" y="0.00000" width="0.68750"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Code Bip]]>
              </string>
            </textSegment>
          </text>
          <text name="B_libelle_projet" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="0.68750" y="0.00000" width="1.18750"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Libelle Projet]]>
              </string>
            </textSegment>
          </text>
        </frame>
      </frame>
    </body>
  </section>
  </layout>
  <parameterForm>
  <text name="PB_5" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="1.32129" y="0.15979" width="1.38513" height="0.22205"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="12" bold="yes"/>
      <string>
      <![CDATA[Paramètres état]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_9" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.77441" y="0.49304" width="2.47888" height="0.18042"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="10" bold="yes"/>
      <string>
      <![CDATA[Entrer les valeurs des paramètres]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM1" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="0.82629" width="0.60388" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[P Param6]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_GLOBAL" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="1.15955" width="0.54138" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[P Global]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM7" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="1.49280" width="0.93726" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[DP P_PARAM7]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM8" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="1.82605" width="1.10388" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[Projet P_PARAM8]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM9" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="2.15930" width="1.41638" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[Application P_PARAM9]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM10" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="2.49255" width="0.99976" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[CAFI P Param10]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM11" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="2.82581" width="1.40601" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[CAPAYEUR P Param11]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM12" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="3.15906" width="1.06226" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[CADA P Param12]]>
      </string>
    </textSegment>
  </text>
  <field name="PF_P_PARAM1" source="P_PARAM6" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="0.78430" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_GLOBAL1" source="P_GLOBAL" pageNumber="1"
   minWidowLines="1" spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="1.11755" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM7" source="P_PARAM7" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="1.45081" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM8" source="P_PARAM8" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="1.78406" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM9" source="P_PARAM9" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="2.11731" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM10" source="P_PARAM10" pageNumber="1"
   minWidowLines="1" spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="2.45056" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM11" source="P_PARAM11" pageNumber="1"
   minWidowLines="1" spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="2.78381" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM12" source="P_PARAM12" pageNumber="1"
   minWidowLines="1" spacing="0">
    <font size="0"/>
    <geometryInfo x="1.87500" y="3.11707" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  </parameterForm>
  <programUnits>
    <function name="afterpform">
      <textSource>
      <![CDATA[function AfterPForm return boolean is

	l_global pack_global.GlobalData;

	chaine_doss_proj VARCHAR2(5000);
	chaine_projet VARCHAR2(5000);
	chaine_application VARCHAR2(5000);
	chaine_cafi VARCHAR2(5000);
	chaine_ca_payeur VARCHAR2(5000);
	chaine_cada VARCHAR2(5000);
	
  -- Habilitation de l'utilisateur sur le référentiel dossier projet, projet application 
  l_habil_dp VARCHAR2(5000);
	l_habil_p VARCHAR2(5000);
	l_habil_a VARCHAR2(5000);
	l_habil_cafi VARCHAR2(5000);
	l_habil_ca_payeur VARCHAR2(5000);
	l_habil_cada 		VARCHAR2(5000);
	
	l_from_temp 		VARCHAR2(32000);
	
	l_compteur 			NUMBER(12);
	l_ssoumenu			VARCHAR2(100);

BEGIN

	:P_PERIM_ME:=pack_global.lire_perime(:P_GLOBAL);
	:P_PERIM_CAFI := pack_global.lire_ca_fi(:P_GLOBAL);
	
	-- utilise pour l affichage des colonnes
	l_ssoumenu := Pack_Global.lire_globaldata(:P_GLOBAL).sousmenus;
	IF ( INSTR(UPPER(l_ssoumenu),UPPER('ges')) > 0 ) THEN
		:P_SMENUS_GES := 'O';
	ELSE
		:P_SMENUS_GES := 'N';
	END IF;
	
	
	SELECT to_number(to_char(DATDEBEX.DATDEBEX,'YYYY' )) INTO :P_ANNEE FROM DATDEBEX;
	
	if (:P_param6='.CSV') then
		:P_separateur :='"';
	else
		:P_separateur:='';
	end if;
  	
 
  :p_where := '';		
  		
  l_global := pack_global.lire_globaldata(:P_GLOBAL);

 	l_habil_a := l_global.appli;
  l_habil_a := REPLACE(l_habil_a ,',',''',''');
  
	l_habil_dp := l_global.doss_proj;
  
  l_habil_p := l_global.projet;
  l_habil_p  := REPLACE(l_habil_p ,',',''',''');	
  
  l_habil_cafi := l_global.ca_fi; 	
  l_habil_ca_payeur := l_global.ca_payeur;
  l_habil_cada  := l_global.ca_da;	
  
   -- Dossier Projet :
	if(trim(:P_PARAM7) = 'Pas de limitation') then
		chaine_doss_proj := 'VIDE';
	elsif(trim(upper(:P_PARAM7)) = 'TOUS')	then
		if(l_habil_dp IS NOT NULL AND l_habil_dp <> 'TOUS' ) then
  		chaine_doss_proj := l_habil_dp; -- seulement les dossiers projets actifs
		else
			chaine_doss_proj := 'VIDE';
		end if;	
	else
		chaine_doss_proj := :P_PARAM7;
	end if;	
  
  --srw.message(1,'chaine_doss_proj : '||chaine_doss_proj);
  
  -- Projet :
	if(trim(:P_PARAM8) = 'Pas de limitation') then
		chaine_projet := 'VIDE';
	elsif(trim(upper(:P_PARAM8)) = 'TOUS')	then
		if(l_habil_p IS NOT NULL AND l_habil_p <> 'TOUS' ) then
  		chaine_projet := l_habil_p; -- seulement les projets actifs
		else
			chaine_projet := 'VIDE';	
		end if;	
	else
		chaine_projet := :P_PARAM8;
	end if;	

	--srw.message(1,'chaine_projet : '||chaine_projet);

	-- application :
	if(trim(:P_PARAM9) = 'Pas de limitation') then
		chaine_application := 'VIDE';
	elsif(trim(upper(:P_PARAM9)) = 'TOUS')	then
		if(l_habil_a IS NOT NULL AND l_habil_a <> 'TOUS' ) then
  		chaine_application := l_habil_a; -- seulement les applications actifs
		else
			chaine_application := 'VIDE';	
		end if;	
	else
		chaine_application := :P_PARAM9;
	end if;	
  		
		--srw.message(1,'chaine_application : '||chaine_application);
		
		
	 -- CAFI
 	if(trim(:p_param10) = 'Pas de limitation') then
		chaine_cafi := '';
	elsif(trim(upper(:p_param10)) = 'TOUS')	then
		if(l_habil_cafi IS NOT NULL AND trim(upper(l_habil_cafi)) <> 'TOUS' ) then
  		chaine_cafi := l_habil_cafi;
		else
			chaine_cafi := '';	
		end if;	
	else
		chaine_cafi := :p_param10;
	end if;	

	--srw.message(1,'chaine_cafi : '||chaine_cafi);

  -- CA_PAYEUR
	if(trim(:p_param11) = 'Pas de limitation') then
		chaine_ca_payeur := '';
	elsif(trim(upper(:p_param11)) = 'TOUS')	then
		if(l_habil_ca_payeur  IS NOT NULL AND trim(upper(l_habil_ca_payeur )) <> 'TOUS' ) then
  		chaine_ca_payeur := l_habil_ca_payeur ;
		else
			chaine_ca_payeur := '';	
		end if;	
	else
		chaine_ca_payeur := :p_param11;
	end if;	
	
	--srw.message(1,'chaine_cap_ayeur : '||chaine_ca_payeur);
	
	  -- CA_DA
	if(trim(:p_param12) = 'Pas de limitation') then
		chaine_cada := '';
	elsif(trim(upper(:p_param12)) = 'TOUS')	then
		if(l_habil_cada  IS NOT NULL AND trim(upper(l_habil_cada )) <> 'TOUS' ) then
  		chaine_cada := l_habil_cada ;
		else
			chaine_cada := '';	
		end if;	
	else
		chaine_cada := :p_param12;
	end if;	
	
	--srw.message(1,'chaine_cada : '||chaine_cada);
	
			
	if(chaine_doss_proj <> 'VIDE') then
		:p_where := :p_where || ' and ligne_bip.DPCODE IN (' || chaine_doss_proj ||') ';
	end if;
	
	if(chaine_projet <> 'VIDE') then 	
		:p_where := :p_where || ' and ligne_bip.ICPI IN ('''||chaine_projet||''') ';
	end if;
	
	if(chaine_application <> 'VIDE') then
		:p_where := :p_where || ' and ligne_bip.AIRT IN ('''||chaine_application||''') ';
	end if;
	
              -- DEBUT TRAITEMENT CAFI
l_from_temp := ',(';
	  l_compteur := 1 ;              
     while (length(chaine_cafi) != 0) loop
     
     if (instr(chaine_cafi,',') != 0) then
          l_habil_cafi := substr(chaine_cafi,0,instr(chaine_cafi,',')-1);
          chaine_cafi := substr(chaine_cafi,instr(chaine_cafi,',')+1);
     else
        l_habil_cafi := chaine_cafi;
        chaine_cafi := '';
     end if;

     if (l_compteur != 1) then
        l_from_temp := l_from_temp || 'UNION';

     end if;
     
      if (pack_global.recherche_niveau(l_habil_cafi) != 99) then
     
     if (pack_global.recherche_niveau(l_habil_cafi) = 0) then

             	l_from_temp := l_from_temp||'(
                            select codcamo 
							from centre_activite
							where 
							codcamo IN ('|| l_habil_cafi || ')
									AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))			 		         												
							)';	      
     elsif (pack_global.recherche_niveau(l_habil_cafi) = 1) then
            	
             l_from_temp := l_from_temp||'(					 		        
						     select codcamo 
						     from centre_activite
							 where 
								 CANIV1 IN ('|| l_habil_cafi || ')
									AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
						)';	      
           elsif (pack_global.recherche_niveau(l_habil_cafi) = 2) then
             l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
														CANIV2 IN ('|| l_habil_cafi|| ')
														AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
											)';
            elsif (pack_global.recherche_niveau(l_habil_cafi) = 3) then
              l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
												 			CANIV3 IN ('|| l_habil_cafi || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';	 
                elsif (pack_global.recherche_niveau(l_habil_cafi) = 4) then       
                l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV4 IN ('|| l_habil_cafi || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';
									elsif (pack_global.recherche_niveau(l_habil_cafi) = 5) then       
                l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV5 IN ('|| l_habil_cafi || ')
														AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';
									elsif (pack_global.recherche_niveau(l_habil_cafi) = 6) then       
               l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV6 IN ('|| l_habil_cafi || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
											)';
												
                         	
          end if;          
        l_compteur := l_compteur+1;
       end if;
      END LOOP;      
    
    	l_from_temp := l_from_temp || ') liste_ca_fi ';
    
        		
		--srw.message(1,'p_from : '||l_from_temp);
    
    	if (l_compteur <> 1) then
    			:p_from := :p_from || l_from_temp;
    			:p_where := :p_where || ' AND conso.cafi = liste_ca_fi.codcamo ';
    	end if;
    	
    	-- FIN TRAITEMENT CAFI 
       
       -- DEBUT TRAITEMENT CA_PAYEUR
       	l_from_temp :=',(';
	  l_compteur := 1 ;
       
     while (length(chaine_ca_payeur) != 0) loop
     
     if (instr(chaine_ca_payeur,',') != 0) then
          l_habil_ca_payeur := substr(chaine_ca_payeur,0,instr(chaine_ca_payeur,',')-1);
          chaine_ca_payeur := substr(chaine_ca_payeur,instr(chaine_ca_payeur,',')+1);
     else
        l_habil_ca_payeur := chaine_ca_payeur;
        chaine_ca_payeur := '';
     end if;

     if (l_compteur != 1) then
        l_from_temp := l_from_temp || 'UNION';

     end if;
     
      if (pack_global.recherche_niveau(l_habil_ca_payeur) != 99) then
     
     if (pack_global.recherche_niveau(l_habil_ca_payeur) = 0) then

             	l_from_temp := l_from_temp||'(
                            select codcamo 
							from centre_activite
							where 
							codcamo IN ('|| l_habil_ca_payeur || ')
									AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))			 		         												
							)';	      
     elsif (pack_global.recherche_niveau(l_habil_ca_payeur) = 1) then
            	
             l_from_temp := l_from_temp||'(					 		        
						     select codcamo 
						     from centre_activite
							 where 
								 CANIV1 IN ('|| l_habil_ca_payeur || ')
									AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
						)';	      
           elsif (pack_global.recherche_niveau(l_habil_ca_payeur) = 2) then
             l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
														CANIV2 IN ('|| l_habil_ca_payeur|| ')
														AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
											)';
            elsif (pack_global.recherche_niveau(l_habil_ca_payeur) = 3) then
             l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
												 			CANIV3 IN ('|| l_habil_ca_payeur || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';	 
                elsif (pack_global.recherche_niveau(l_habil_ca_payeur) = 4) then       
                l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV4 IN ('|| l_habil_ca_payeur || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';
									elsif (pack_global.recherche_niveau(l_habil_ca_payeur) = 5) then       
                l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV5 IN ('|| l_habil_ca_payeur || ')
														AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';
									elsif (pack_global.recherche_niveau(l_habil_ca_payeur) = 6) then       
                l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV6 IN ('|| l_habil_ca_payeur || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
											)';
												
                         	
          end if;          
        l_compteur := l_compteur+1;
       end if;
      END LOOP;      
    
    	l_from_temp := l_from_temp || ') liste_ca_payeur';
    
        		
		--srw.message(1,'p_from : '||l_from_temp);
    
    	if (l_compteur != 1) then
          :p_from := :p_from || l_from_temp;   	
    			:p_where := :p_where || ' AND ligne_bip.codcamo = liste_ca_payeur.codcamo ';
    	end if;
    	
    	-- FIN TRAITEMENT CA PAYEUR   
    	
    	   -- DEBUT TRAITEMENT CADA
       	l_from_temp :=',(';
	  l_compteur := 1 ;
       
     while (length(chaine_cada) != 0) loop
     
     if (instr(chaine_cada,',') != 0) then
          l_habil_cada := substr(chaine_cada,0,instr(chaine_cada,',')-1);
          chaine_cada := substr(chaine_cada,instr(chaine_cada,',')+1);
     else
        l_habil_cada := chaine_cada;
        chaine_cada := '';
     end if;

     if (l_compteur != 1) then
        l_from_temp := l_from_temp || 'UNION';

     end if;
     
      if (pack_global.recherche_niveau(l_habil_cada) != 99) then
     
     if (pack_global.recherche_niveau(l_habil_cada) = 0) then

             	l_from_temp := l_from_temp||'(
                            select codcamo 
							from centre_activite
							where 
							codcamo IN ('|| l_habil_cada || ')
									AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))			 		         												
							)';	      
     elsif (pack_global.recherche_niveau(l_habil_cada) = 1) then
            	
             l_from_temp := l_from_temp||'(					 		        
						     select codcamo 
						     from centre_activite
							 where 
								 CANIV1 IN ('|| l_habil_cada || ')
									AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
						)';	      
           elsif (pack_global.recherche_niveau(l_habil_cada) = 2) then
             l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
														CANIV2 IN ('|| l_habil_cada|| ')
														AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
											)';
            elsif (pack_global.recherche_niveau(l_habil_cada) = 3) then
             l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
												 			CANIV3 IN ('|| l_habil_cada || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';	 
                elsif (pack_global.recherche_niveau(l_habil_cada) = 4) then       
                l_from_temp := l_from_temp||'(						 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV4 IN ('|| l_habil_cada || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';
									elsif (pack_global.recherche_niveau(l_habil_cada) = 5) then       
                l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV5 IN ('|| l_habil_cada || ')
														AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
												)';
									elsif (pack_global.recherche_niveau(l_habil_cada) = 6) then       
                l_from_temp := l_from_temp||'(					 		        
						 		        select codcamo 
													from centre_activite
													where 
																CANIV6 IN ('|| l_habil_cada || ')
													AND (cdateferm is null or substr(TO_DATE(cdateferm, ''DD/MM/YYYY''), 7, 8) = substr(TO_DATE(sysdate, ''DD/MM/YYYY''), 7, 8))
											)';
												
                         	
          end if;          
        l_compteur := l_compteur+1;
       end if;
      END LOOP;      
    
    	l_from_temp := l_from_temp || ') liste_cada';
    
        		
		--srw.message(1,'p_from : '||l_from_temp);
    
    	if (l_compteur != 1) then
          :p_from := :p_from || l_from_temp;   	
    			:p_where := :p_where || ' AND proj_info.cada = liste_cada.codcamo ';
    	end if;
    	-- FIN TRAITEMENT CADA  		
    	
    	
    	 		
		--srw.message(1,'compteur : '||l_compteur);
  			--srw.message(1,'p_from : '||:p_from);
  return (TRUE);
end;]]>
      </textSource>
    </function>
  </programUnits>
  <webSource>
  <![CDATA[<%@ taglib uri="/WEB-INF/lib/reports_tld.jar" prefix="rw" %> 
<%@ page language="java" import="java.io.*" errorPage="/rwerror.jsp" session="false" %>
<%@ page contentType="text/html;charset=ISO-8859-1" %>
<!--
<rw:report id="report"> 
<rw:objects id="objects">
</rw:objects>
-->

<html>

<head>
<meta name="GENERATOR" content="Oracle 9i Reports Developer"/>
<title> Your Title </title>

<rw:style id="yourStyle">
   <!-- Report Wizard inserts style link clause here -->
</rw:style>

</head>


<body>

<rw:dataArea id="yourDataArea">
   <!-- Report Wizard inserts the default jsp here -->
</rw:dataArea>



</body>
</html>

<!--
</rw:report> 
-->
]]>
  </webSource>
  <reportPrivate defaultReportType="tabular" versionFlags2="0" templateName=""
  />
  <reportWebSettings>
  <![CDATA[#NULL#]]>
  </reportWebSettings>
</report>