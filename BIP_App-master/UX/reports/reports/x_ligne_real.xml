<?xml version="1.0" encoding="WINDOWS-1252" ?>
<report name="x_ligne_real" DTDVersion="9.0.2.0.10"
 afterParameterFormTrigger="afterpform">
  <xmlSettings xmlTag="T03400196" xmlPrologType="text">
  <![CDATA[<?xml version="1.0"?>]]>
  </xmlSettings>
  <reportHtmlEscapes>
    <beforeReportHtmlEscape>
    <![CDATA[<html>
<body dir=&Direction bgcolor="#ffffff">
]]>
    </beforeReportHtmlEscape>
    <beforePageHtmlEscape>
    <![CDATA[#NULL#]]>
    </beforePageHtmlEscape>
    <afterPageHtmlEscape>
    <![CDATA[<hr size=5 noshade>
]]>
    </afterPageHtmlEscape>
    <beforeFormHtmlEscape>
    <![CDATA[<html>
<body dir=&Direction bgcolor="#ffffff">
<form method=post action="_action_">
<input name="hidden_run_parameters" type=hidden value="_hidden_">
<font color=red><!--error--></font>
<center>
<p><table border=0 cellspacing=0 cellpadding=0>
<tr>
<td><input type=submit></td>
<td width=15>
<td><input type=reset></td>
</tr>
</table>
<p><hr><p>
]]>
    </beforeFormHtmlEscape>
    <pageNavigationHtmlEscape>
    <![CDATA[<HTML>
<TITLE>Oracle HTML Navigator</TITLE>
<HEAD>
<SCRIPT LANGUAGE = "JavaScript">

var jump_index = 1			// Jump to this page
var num_pages = &TotalPages			// Total number of pages
var basefilename = "&file_name"		// Base file name
var fileext = "&file_ext"		//File extension

/* jumps to "new_page" */
function new_page(form, new_page)
{
	form.reqpage.value = new_page;
	parent.frames[0].location = basefilename + "_" + new_page + "."+fileext;
}

/* go back one page */
function back(form)
{
	/* if we are not in first page */
	if (jump_index > 1)
	{
		jump_index--;
		new_page(form, jump_index);
	}
}

/* go forward one page */
function forward(form)
{
	/* if we are not in last page */
	if (jump_index < num_pages)
	{
		jump_index++;
		new_page(form, jump_index);
	}
}

/* go to first page */
function first(form)
{
	if(jump_index != 1)
	{
		jump_index = 1;
		new_page(form, jump_index);
	}
}

/* go to last page */
function last(form)
{
	if(jump_index != num_pages)
	{
		jump_index = num_pages;
		new_page(form, jump_index);
	}
}

/* go to the user specified page number */
function pagenum(form)
{
	/* sanity check */
	if (form.reqpage.value < 1)
	{
		form.reqpage.value = 1;
	}
	if (form.reqpage.value > num_pages)
	{
		form.reqpage.value = num_pages;
	}
	jump_index = form.reqpage.value;
	new_page(form, jump_index);
}
</SCRIPT>
</HEAD>

<BODY>
<FORM NAME="ThisForm" onSubmit="pagenum(this); return false;">
<center><table><tr>
<td> <INPUT TYPE="button"  VALUE="<< " onClick="first(this.form)">
<td> <INPUT TYPE="button"  VALUE=" < " onClick="back(this.form)">
<td> <INPUT TYPE="button"  VALUE="Page:" onClick="pagenum(this.form)">
<td> <INPUT NAME="reqpage" VALUE="1" SIZE=2>
<td> <INPUT TYPE="button"  VALUE=" > " onClick="forward(this.form)">
<td> <INPUT TYPE="button"  VALUE=" >>" onClick="last(this.form)">
</table></center>
</FORM></BODY>
</HTML>
]]>
    </pageNavigationHtmlEscape>
  </reportHtmlEscapes>
  <data>
    <userParameter name="P_PARAM7" datatype="number" precision="10"
     initialValue="34410" label="P Param7" defaultWidth="0" defaultHeight="0"
    />
    <userParameter name="P_WHERE" datatype="character" width="1024"
     precision="10" label="P Where" defaultWidth="0" defaultHeight="0"
     display="no"/>
    <userParameter name="P_PARAM8" datatype="number" width="4" precision="10"
     initialValue="2003" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_MENU" datatype="character" width="52"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_GLOBAL" datatype="character" width="5000"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_habili_DP" datatype="character" width="512"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_habili_P" datatype="character" width="512"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_HAB" datatype="character" width="512"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_PARAM9" datatype="character" precision="10"
     defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_PARAM10" datatype="character" precision="10"
     defaultWidth="0" defaultHeight="0"/>
    <userParameter name="A_WHERE" datatype="character" width="150"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <userParameter name="P_ANNEE" datatype="character" width="150"
     precision="10" defaultWidth="0" defaultHeight="0"/>
    <systemParameter name="MODE" initialValue="Default"/>
    <systemParameter name="ORIENTATION" initialValue="Default"/>
    <dataSource name="Q_1">
      <select>
      <![CDATA[select l.codinv 	CODINV    , 
  	l.annee		ANNEE       , 
  	l.codcamo	CODCAMO     , 
	ps.codposte	POSTE,
	ps.lib_poste	LIB_POSTE,
	n.codnature	NATURE,
	n.lib_nature	LIB_NATURE,
  	l.type		TYPE      , 
	i.lib_type	LIB_TYPE,
  	l.icpi		ICPI        , 
	p.ilibel	ILIBEL,
	l.dpcode	DPCODE,
	d.dplib		DPLIB,
 	l.libelle 	LIBELLE    , 
                 replace (replace(l.cominv,CHR(10),' '),chr(13), ' ')	COMINV, --remplace retour chariot par espace
  	l.quantite	QUANTITE   , 
 	 lpad(nvl(to_char(l.demande, 'FM9999999990D00'),'0,00'),13,' ')  	DEMANDE_HT   , 
     	 lpad(nvl(to_char(l.demande*decode(not_tvarecup, null,(1+t1.tva/100*(1-tr.taux/100)) ,1+not_tvarecup/100) , 'FM9999999990D00'),'0,00'),13,' ') 	DEMANDE_HTR   , 
  	 lpad(nvl(to_char(l.notifie*decode(not_tvarecup, null,(1+t1.tva/100*(1-tr.taux/100)) ,1+not_tvarecup/100), 'FM9999999990D00'),'0,00'),13,' ') 	NOTIFIE_HTR    , 
  	 lpad(nvl(to_char(pack_suivi_investissement.sum_realises(TO_NUMBER(l.codinv),TO_NUMBER(l.codcamo),TO_NUMBER(l.annee)), 'FM9999999990D00'),'0,00'),13,' ') 		ENGAGE_TOTAL_HT    , 
  	 lpad(nvl(to_char(pack_suivi_investissement.sum_realises_htr(TO_NUMBER(l.codinv),TO_NUMBER(l.codcamo),TO_NUMBER(l.annee)), 'FM9999999990D00'),'0,00'),13,' ') 		ENGAGE_TOTAL_HTR    , 
  	 lpad(nvl(to_char(l.re_estime*decode(not_tvarecup, null,(1+t1.tva/100*(1-tr.taux/100)) , (1+ t2.tva/100*(1-tr.taux/100))), 'FM9999999990D00'),'0,00'),13,' ') 	RE_ESTIME_HTR   , 
  	 lpad(nvl(to_char(l.notifie*decode(not_tvarecup, null,(1+t1.tva/100*(1-tr.taux/100)) ,1+not_tvarecup/100) - pack_suivi_investissement.sum_realises_htr(TO_NUMBER(l.codinv),TO_NUMBER(l.codcamo),TO_NUMBER(l.annee)), 'FM9999999990D00'),'0,00'),13,' ') 		DISPONIBLE_HTR,
	r.codrea	CODREA ,        
	r.type_eng	TYPE_ENG,          
	r.num_cmd	NUM_CMD     ,   
	r.type_cmd	TYPE_CMD   ,    
	r.marque	MARQUE       ,  
	r.modele	MODELE       ,  
	replace (replace(r.comrea,CHR(10),' '),chr(13), ' ')	COMREA, --remplace retour chariot par espace
	r.date_saisie	DATE_SAISIE  ,   
	lpad(nvl(to_char(r.engage, 'FM9999999990D00'),'0,00'),13,' ')  ENGAGE_HT ,
	lpad(nvl(to_char(r.engage*(1+pack_suivi_investissement.cherche_tva(to_char(r.date_saisie))/100*(1-tr.taux/100)), 'FM9999999990D00'),'0,00'),13,' ') 	ENGAGE_HTR ,
                l.toprp       TOPRP,     
                c.CLIBRCA    
from ligne_investissement l,
investissements i,
centre_activite c,
proj_info p,
dossier_projet d,
poste ps,
nature n,
tva t1,--courant
tva t2,--pour le re_estime
taux_recup tr,
ligne_realisation r
where  c.codcamo = l.codcamo
and l.type = i.codtype
and i.codposte = ps.codposte
and i.codnature=n.codnature
AND l.dpcode = d.dpcode
AND l.icpi = p.icpi
AND tr.filcode = c.filcode
AND tr.annee = l.annee
AND t1.datetva =(select max(TVA.datetva) from tva where datetva <= pack_suivi_investissement.cherche_date_exercice)   
AND t2.datetva =(select max(TVA.datetva) from tva where  datetva  <= to_date(l.date_modif_re,'DD/MM/YYYY'))
and r.codinv (+)= l.codinv
and r.annee (+)= l.annee
and r.codcamo (+)= l.codcamo
&P_WHERE
order by 3,2,1,24]]>
      </select>
      <displayInfo x="1.57300" y="0.14587" width="0.69995" height="0.19995"/>
      <group name="G_CODREA">
        <displayInfo x="3.75903" y="0.26233" width="2.25122" height="6.58301"
        />
        <dataItem name="CODINV" oracleDatatype="number" columnOrder="14"
         width="22" defaultWidth="50000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Codinv">
          <xmlSettings xmlTag="N° ligne inv"/>
          <dataDescriptor expression="l.codinv" descriptiveExpression="CODINV"
           order="1" oracleDatatype="number" width="22" precision="3"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ANNEE" oracleDatatype="number" columnOrder="15"
         width="22" defaultWidth="60000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Annee">
          <xmlSettings xmlTag="Année"/>
          <dataDescriptor expression="l.annee" descriptiveExpression="ANNEE"
           order="2" oracleDatatype="number" width="22" precision="4"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="CODCAMO" oracleDatatype="number" columnOrder="16"
         width="22" defaultWidth="70000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Codcamo">
          <xmlSettings xmlTag="Centre activité"/>
          <dataDescriptor expression="l.codcamo"
           descriptiveExpression="CODCAMO" order="3" oracleDatatype="number"
           width="22" precision="5"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="POSTE" oracleDatatype="number" columnOrder="26"
         width="22" defaultWidth="60000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Poste" breakOrder="none">
          <xmlSettings xmlTag="Code poste"/>
          <dataDescriptor expression="ps.codposte"
           descriptiveExpression="POSTE" order="4" oracleDatatype="number"
           width="22" precision="4"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="LIB_POSTE" datatype="vchar2" columnOrder="27"
         width="64" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Lib Poste" breakOrder="none">
          <xmlSettings xmlTag="Lib poste"/>
          <dataDescriptor expression="ps.lib_poste"
           descriptiveExpression="LIB_POSTE" order="5" width="64"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="NATURE" oracleDatatype="number" columnOrder="28"
         width="22" defaultWidth="60000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Nature" breakOrder="none">
          <xmlSettings xmlTag="Code nature"/>
          <dataDescriptor expression="n.codnature"
           descriptiveExpression="NATURE" order="6" oracleDatatype="number"
           width="22" precision="4"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="LIB_NATURE" datatype="vchar2" columnOrder="29"
         width="64" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Lib Nature" breakOrder="none">
          <xmlSettings xmlTag="Lib nature"/>
          <dataDescriptor expression="n.lib_nature"
           descriptiveExpression="LIB_NATURE" order="7" width="64"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="TYPE" oracleDatatype="number" columnOrder="30"
         width="22" defaultWidth="60000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Type" breakOrder="none">
          <xmlSettings xmlTag="Type"/>
          <dataDescriptor expression="l.type" descriptiveExpression="TYPE"
           order="8" oracleDatatype="number" width="22" precision="4"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="LIB_TYPE" datatype="vchar2" columnOrder="31"
         width="64" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Lib Type" breakOrder="none">
          <xmlSettings xmlTag="Lib type"/>
          <dataDescriptor expression="i.lib_type"
           descriptiveExpression="LIB_TYPE" order="9" width="64"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ICPI" datatype="character" oracleDatatype="aFixedChar"
         columnOrder="32" width="5" defaultWidth="50000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Icpi" breakOrder="none">
          <dataDescriptor expression="l.icpi" descriptiveExpression="ICPI"
           order="10" oracleDatatype="aFixedChar" width="5"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ILIBEL" datatype="vchar2" columnOrder="33" width="50"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Ilibel" breakOrder="none">
          <xmlSettings xmlTag="Lib projet"/>
          <dataDescriptor expression="p.ilibel" descriptiveExpression="ILIBEL"
           order="11" width="50"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="DPCODE" oracleDatatype="number" columnOrder="34"
         width="22" defaultWidth="70000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Dpcode" breakOrder="none">
          <xmlSettings xmlTag="Dossier projet"/>
          <dataDescriptor expression="l.dpcode" descriptiveExpression="DPCODE"
           order="12" oracleDatatype="number" width="22" precision="5"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="DPLIB" datatype="vchar2" columnOrder="35" width="50"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Dplib" breakOrder="none">
          <xmlSettings xmlTag="Lib dossier projet"/>
          <dataDescriptor expression="d.dplib" descriptiveExpression="DPLIB"
           order="13" width="50"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="LIBELLE" datatype="vchar2" columnOrder="36" width="50"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Libelle" breakOrder="none">
          <xmlSettings xmlTag="Lib investissements"/>
          <dataDescriptor expression="l.libelle"
           descriptiveExpression="LIBELLE" order="14" width="50"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="COMINV" datatype="vchar2" columnOrder="46" width="200"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Cominv" breakOrder="none">
          <xmlSettings xmlTag="commentaire_invest"/>
          <dataDescriptor
           expression="replace ( replace ( l.cominv , CHR ( 10 ) , &apos; &apos; ) , chr ( 13 ) , &apos; &apos; )"
           descriptiveExpression="COMINV" order="15" width="200"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="QUANTITE" oracleDatatype="number" columnOrder="37"
         width="22" defaultWidth="50000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Quantite" breakOrder="none">
          <xmlSettings xmlTag="Quantité"/>
          <dataDescriptor expression="l.quantite"
           descriptiveExpression="QUANTITE" order="16" oracleDatatype="number"
           width="22" precision="3"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="DEMANDE_HT" datatype="vchar2" columnOrder="38"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Demande Ht" breakOrder="none">
          <xmlSettings xmlTag="Demandé HT"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( l.demande , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="DEMANDE_HT" order="17" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="DEMANDE_HTR" datatype="vchar2" columnOrder="39"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Demande Htr" breakOrder="none">
          <xmlSettings xmlTag="Demandé HTR"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( l.demande * decode ( not_tvarecup , null , ( 1 + t1.tva / 100 * ( 1 - tr.taux / 100 ) ) , 1 + not_tvarecup / 100 ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="DEMANDE_HTR" order="18" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="NOTIFIE_HTR" datatype="vchar2" columnOrder="40"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Notifie Htr" breakOrder="none">
          <xmlSettings xmlTag="Notifié HTR"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( l.notifie * decode ( not_tvarecup , null , ( 1 + t1.tva / 100 * ( 1 - tr.taux / 100 ) ) , 1 + not_tvarecup / 100 ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="NOTIFIE_HTR" order="19" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ENGAGE_TOTAL_HT" datatype="vchar2" columnOrder="41"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Engage Total Ht" breakOrder="none">
          <xmlSettings xmlTag="Engagé total HT"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( pack_suivi_investissement.sum_realises ( TO_NUMBER ( l.codinv ) , TO_NUMBER ( l.codcamo ) , TO_NUMBER ( l.annee ) ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="ENGAGE_TOTAL_HT" order="20" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ENGAGE_TOTAL_HTR" datatype="vchar2" columnOrder="42"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Engage Total Htr" breakOrder="none">
          <xmlSettings xmlTag="Engagé total HTR"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( pack_suivi_investissement.sum_realises_htr ( TO_NUMBER ( l.codinv ) , TO_NUMBER ( l.codcamo ) , TO_NUMBER ( l.annee ) ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="ENGAGE_TOTAL_HTR" order="21" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="RE_ESTIME_HTR" datatype="vchar2" columnOrder="43"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Re Estime Htr" breakOrder="none">
          <xmlSettings xmlTag="Ré_estimé HTR"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( l.re_estime * decode ( not_tvarecup , null , ( 1 + t1.tva / 100 * ( 1 - tr.taux / 100 ) ) , ( 1 + t2.tva / 100 * ( 1 - tr.taux / 100 ) ) ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="RE_ESTIME_HTR" order="22" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="DISPONIBLE_HTR" datatype="vchar2" columnOrder="44"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Disponible Htr" breakOrder="none">
          <xmlSettings xmlTag="Disponible HTR"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( l.notifie * decode ( not_tvarecup , null , ( 1 + t1.tva / 100 * ( 1 - tr.taux / 100 ) ) , 1 + not_tvarecup / 100 ) - pack_suivi_investissement.sum_realises_htr ( TO_NUMBER ( l.codinv ) , TO_NUMBER ( l.codcamo ) , TO_NUMBER ( l.annee ) ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="DISPONIBLE_HTR" order="23" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="CODREA" oracleDatatype="number" columnOrder="13"
         width="22" defaultWidth="40000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Codrea">
          <xmlSettings xmlTag="N° ligne real"/>
          <dataDescriptor expression="r.codrea" descriptiveExpression="CODREA"
           order="24" oracleDatatype="number" width="22" precision="2"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="TYPE_ENG" datatype="vchar2" columnOrder="23"
         width="15" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Type Eng" breakOrder="none">
          <xmlSettings xmlTag="Type engagement"/>
          <dataDescriptor expression="r.type_eng"
           descriptiveExpression="TYPE_ENG" order="25" width="15"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="NUM_CMD" datatype="vchar2" columnOrder="19" width="15"
         defaultWidth="70000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Num Cmd" breakOrder="none">
          <xmlSettings xmlTag="N° commande"/>
          <dataDescriptor expression="r.num_cmd"
           descriptiveExpression="NUM_CMD" order="26" width="15"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="TYPE_CMD" datatype="vchar2" columnOrder="20"
         width="15" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Type Cmd" breakOrder="none">
          <xmlSettings xmlTag="Type commande"/>
          <dataDescriptor expression="r.type_cmd"
           descriptiveExpression="TYPE_CMD" order="27" width="15"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="MODELE" datatype="vchar2" columnOrder="22" width="15"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Modele" breakOrder="none">
          <xmlSettings xmlTag="Modele"/>
          <dataDescriptor expression="r.modele" descriptiveExpression="MODELE"
           order="29" width="15"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="TOPRP" datatype="character"
         oracleDatatype="aFixedChar" columnOrder="47" width="1"
         defaultWidth="10000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Toprp" breakOrder="none">
          <xmlSettings xmlTag="Top Récurrent Projet"/>
          <dataDescriptor expression="l.toprp" descriptiveExpression="TOPRP"
           order="34" oracleDatatype="aFixedChar" width="1"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="MARQUE" datatype="vchar2" columnOrder="21" width="15"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Marque" breakOrder="none">
          <xmlSettings xmlTag="Marque"/>
          <dataDescriptor expression="r.marque" descriptiveExpression="MARQUE"
           order="28" width="15"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="COMREA" datatype="vchar2" columnOrder="45" width="200"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Comrea" breakOrder="none">
          <xmlSettings xmlTag="Commentaire_réal"/>
          <dataDescriptor
           expression="replace ( replace ( r.comrea , CHR ( 10 ) , &apos; &apos; ) , chr ( 13 ) , &apos; &apos; )"
           descriptiveExpression="COMREA" order="30" width="200"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="DATE_SAISIE" datatype="vchar2" columnOrder="18"
         defaultWidth="100000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Date Saisie" breakOrder="none">
          <xmlSettings xmlTag="Date de saisie"/>
          <dataDescriptor expression="r.date_saisie"
           descriptiveExpression="DATE_SAISIE" order="31" width="10"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ENGAGE_HT" datatype="vchar2" columnOrder="17"
         width="13" defaultWidth="100000" defaultHeight="10000"
         columnFlags="0" defaultLabel="Engage" breakOrder="none">
          <xmlSettings xmlTag="Engagé HT"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( r.engage , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="ENGAGE_HT" order="32" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="ENGAGE_HTR" datatype="vchar2" columnOrder="25"
         width="13" defaultWidth="90000" defaultHeight="10000" columnFlags="0"
         defaultLabel="Engage Htr" breakOrder="none">
          <xmlSettings xmlTag="Engagé HTR"/>
          <dataDescriptor
           expression="lpad ( nvl ( to_char ( r.engage * ( 1 + pack_suivi_investissement.cherche_tva ( to_char ( r.date_saisie ) ) / 100 * ( 1 - tr.taux / 100 ) ) , &apos;FM9999999990D00&apos; ) , &apos;0,00&apos; ) , 13 , &apos; &apos; )"
           descriptiveExpression="ENGAGE_HTR" order="33" width="13"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
        <dataItem name="CLIBRCA" datatype="character"
         oracleDatatype="aFixedChar" columnOrder="55" width="16"
         defaultWidth="100000" defaultHeight="10000" columnFlags="1"
         defaultLabel="Clibrca">
          <xmlSettings xmlTag="Libellé du centre d&apos;activité"/>
          <dataDescriptor expression="c.CLIBRCA"
           descriptiveExpression="CLIBRCA" order="35" width="16"/>
          <dataItemPrivate adtName="" schemaName=""/>
        </dataItem>
      </group>
    </dataSource>
  </data>
  <layout>
  <section name="main">
    <body>
      <frame name="M_G_CODREA_GRPFR">
        <geometryInfo x="0.00000" y="0.00000" width="7.37500" height="0.50000"
        />
        <generalLayout verticalElasticity="variable"/>
        <repeatingFrame name="R_G_CODREA" source="G_CODREA"
         printDirection="down" minWidowRecords="1" columnMode="no">
          <geometryInfo x="0.00000" y="0.31250" width="7.37500"
           height="0.18750"/>
          <generalLayout verticalElasticity="expand"/>
          <field name="F_CODREA" source="CODREA" minWidowLines="1" spacing="0"
           alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="0.00000" y="0.31250" width="0.50000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_CODINV" source="CODINV" minWidowLines="1" spacing="0"
           alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="0.62500" y="0.31250" width="0.50000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_ANNEE" source="ANNEE" minWidowLines="1" spacing="0"
           alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="1.25000" y="0.31250" width="0.50000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_CODCAMO" source="CODCAMO" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="1.87500" y="0.31250" width="0.56250"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_TYPE_ENG" source="TYPE_ENG" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="2.56250" y="0.31250" width="0.37500"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_NUM_CMD" source="NUM_CMD" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="3.06250" y="0.31250" width="0.25000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_TYPE_CMD" source="TYPE_CMD" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="3.43750" y="0.31250" width="0.37500"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_MARQUE" source="MARQUE" minWidowLines="1" spacing="0"
           alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="3.93750" y="0.31250" width="0.50000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_MODELE" source="MODELE" minWidowLines="1" spacing="0"
           alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="4.68750" y="0.31250" width="0.50000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_DATE_SAISIE" source="DATE_SAISIE" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="6.00000" y="0.31250" width="0.50000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
          <field name="F_ENGAGE" source="ENGAGE_HT" minWidowLines="1"
           spacing="0" alignment="start">
            <font face="Courier New" size="8"/>
            <geometryInfo x="6.62500" y="0.31250" width="0.75000"
             height="0.18750"/>
            <generalLayout verticalElasticity="expand"/>
          </field>
        </repeatingFrame>
        <frame name="M_G_CODREA_HDR">
          <geometryInfo x="0.00000" y="0.00000" width="7.37500"
           height="0.31250"/>
          <advancedLayout printObjectOnPage="allPage"
           basePrintingOn="anchoringObject"/>
          <text name="B_CODREA" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="0.00000" y="0.00000" width="0.50000"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Codrea]]>
              </string>
            </textSegment>
          </text>
          <text name="B_CODINV" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="0.62500" y="0.00000" width="0.50000"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Codinv]]>
              </string>
            </textSegment>
          </text>
          <text name="B_ANNEE" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="1.25000" y="0.00000" width="0.50000"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Annee]]>
              </string>
            </textSegment>
          </text>
          <text name="B_CODCAMO" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="1.87500" y="0.00000" width="0.56250"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Codcamo]]>
              </string>
            </textSegment>
          </text>
          <text name="B_TYPE_ENG" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="2.56250" y="0.00000" width="0.37500"
             height="0.31250"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Type
]]>
              </string>
            </textSegment>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Eng]]>
              </string>
            </textSegment>
          </text>
          <text name="B_NUM_CMD" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="3.06250" y="0.00000" width="0.25000"
             height="0.31250"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Num
]]>
              </string>
            </textSegment>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Cmd]]>
              </string>
            </textSegment>
          </text>
          <text name="B_TYPE_CMD" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="3.43750" y="0.00000" width="0.37500"
             height="0.31250"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Type
]]>
              </string>
            </textSegment>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Cmd]]>
              </string>
            </textSegment>
          </text>
          <text name="B_MARQUE" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="3.93750" y="0.00000" width="0.50000"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Marque]]>
              </string>
            </textSegment>
          </text>
          <text name="B_MODELE" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="4.68750" y="0.00000" width="0.50000"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Modele]]>
              </string>
            </textSegment>
          </text>
          <text name="B_DATE_SAISIE" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="6.00000" y="0.00000" width="0.50000"
             height="0.31250"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Date
]]>
              </string>
            </textSegment>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Saisie]]>
              </string>
            </textSegment>
          </text>
          <text name="B_ENGAGE" minWidowLines="1">
            <textSettings spacing="0"/>
            <geometryInfo x="6.62500" y="0.00000" width="0.75000"
             height="0.18750"/>
            <textSegment>
              <font face="Courier New" size="8"/>
              <string>
              <![CDATA[Engage]]>
              </string>
            </textSegment>
          </text>
        </frame>
      </frame>
    </body>
  </section>
  </layout>
  <parameterForm>
  <text name="PB_1" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="1.32129" y="0.15979" width="1.38513" height="0.22205"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="12" bold="yes"/>
      <string>
      <![CDATA[Paramètres état]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_2" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.77441" y="0.49304" width="2.47888" height="0.18042"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="10" bold="yes"/>
      <string>
      <![CDATA[Entrer les valeurs des paramètres]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_P_PARAM7" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.24316" y="1.11682" width="1.24646" height="0.14929"/>
    <visualSettings lineWidth="1"/>
    <textSegment>
      <font face="MS Sans Serif" size="8" bold="yes"/>
      <string>
      <![CDATA[P Param7=CA]]>
      </string>
    </textSegment>
  </text>
  <field name="PF_P_PARAM7" source="P_PARAM7" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.50000" y="1.07483" width="2.00000" height="0.26428"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <field name="PF_P_PARAM8" source="P_PARAM8" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.51038" y="1.69678" width="1.94800" height="0.34375"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <text name="PB_3" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.04163" y="1.76965" width="1.39587" height="0.34375"/>
    <textSegment>
      <font face="Courier New" size="10"/>
      <string>
      <![CDATA[P_PARAM8 = annee]]>
      </string>
    </textSegment>
  </text>
  <field name="PF_P_MENU" source="P_MENU" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.52124" y="2.79199" width="1.94800" height="0.20361"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <text name="PB_4" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.36426" y="2.82800" width="1.04175" height="0.23425"/>
    <textSegment>
      <font face="Courier New" size="10"/>
      <string>
      <![CDATA[P_MENU = REF]]>
      </string>
    </textSegment>
  </text>
  <field name="PF_GLOBAL" source="P_GLOBAL" pageNumber="1" minWidowLines="1"
   spacing="0">
    <font size="0"/>
    <geometryInfo x="1.53174" y="3.33362" width="1.94800" height="0.22437"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
  </field>
  <text name="PB_5" pageNumber="1" minWidowLines="1">
    <textSettings spacing="single"/>
    <geometryInfo x="0.70862" y="3.36816" width="0.76013" height="0.22534"/>
    <textSegment>
      <font face="Courier New" size="10"/>
      <string>
      <![CDATA[P_GLOBAL]]>
      </string>
    </textSegment>
  </text>
  <text name="PB_6" pageNumber="1" minWidowLines="1">
    <textSettings justify="center" spacing="single"/>
    <geometryInfo x="0.28125" y="2.19812" width="2.98962" height="0.36438"/>
    <textSegment>
      <font face="Courier New" size="10" bold="yes" underline="yes"/>
      <string>
      <![CDATA[PARAMETRES DU MENU HABILITATION PAR REFERENTIEL]]>
      </string>
    </textSegment>
  </text>
  <line name="PB_7" pageNumber="1" arrow="none">
    <geometryInfo x="0.00000" y="2.13525" width="3.98962" height="0.00000"/>
    <visualSettings lineWidth="1" linePattern="solid"/>
    <points>
      <point x="3.98962" y="2.13525"/>
      <point x="0.00000" y="2.13525"/>
    </points>
  </line>
  </parameterForm>
  <programUnits>
    <function name="afterpform">
      <textSource>
      <![CDATA[function AfterPForm return boolean is

l_niveau entite_structure.niveau%TYPE;
l_annee2	        NUMBER(4);
l_doss_proj VARCHAR2(500);
l_projet VARCHAR2(500);
a_recup taux_recup.annee%TYPE;

begin
	-- On récupère le menu courrant
	:P_Menu := pack_global.lire_globaldata(:P_GLOBAL).menutil;
  :P_HAB  := ' ';
  l_doss_proj := ' ';
  l_projet := ' ';
  
	-- Si Menu habilitation par référentiel
		IF (:P_MENU='REF') THEN
				-- Informations pour l'habilitation par référentiels
				:P_habili_DP := pack_global.lire_doss_proj(:P_GLOBAL);
				:P_habili_P  := pack_global.lire_projet(:P_GLOBAL);	
				
				 -- On vire tous les espaces
		    :P_PARAM10 := RTRIM(LTRIM(:P_PARAM10));
		    :P_PARAM9 := RTRIM(LTRIM(:P_PARAM9));	
		   
		   
		    -- Dossier Projet demandé
  	    if(:P_PARAM10 IS NOT NULL and :P_PARAM10 <> 'TOUS') THEN
	    		   l_doss_proj := ' AND l.DPCODE IN (' || :P_PARAM10 ||') ';
	      end if;
  
        -- Projet demandé
  	    if(:P_PARAM9 IS NOT NULL and :P_PARAM9 <> 'TOUS') THEN
	           l_projet := ' AND l.ICPI IN ('''|| :P_PARAM9 ||''') '; 
	      end if;
	
								
						
				IF (:P_habili_DP is null or :P_habili_DP='' ) THEN
			  	:P_habili_DP := 'VIDE';
				END IF;	
	  		IF (:P_habili_P is null or :P_habili_P='' ) THEN
			  	:P_habili_P := 'VIDE';
	  		END IF;	


	  		-- Si on a une valeur  - on fait des Restrictions
	  		IF ((:P_habili_DP<>'VIDE') AND (:P_habili_DP<>'TOUS')) THEN
	  			:P_HAB := ' AND l.dpcode in ('||:P_habili_DP||')';
	  		END IF;
	  		IF ((:P_habili_P<>'VIDE') AND (:P_habili_P<>'TOUS')) THEN
  				:P_HAB := :P_HAB || ' AND (INSTR('''||:P_habili_P||''', l.icpi) > 0 )';
	  		END IF;	  
	  		
	  		
        
        -- Traitements effectués sur la date de l'exercice en cours			
  			select to_number(to_char(DATDEBEX,'yyyy')) 
  			into l_annee2
  			from datdebex;
  			:P_PARAM8 := l_annee2;

  			:P_WHERE := :P_WHERE || ' AND l.annee  = :P_PARAM8';
  			
  			-- Si on a une valeur égale à TOUS - on ne fait aucune Restriction
	  	  --IF (:P_habili_DP='TOUS' or :P_habili_P='TOUS')THEN
  			--	:P_HAB := ' ';
	  		--END IF;
	  		
  			:P_WHERE := :P_WHERE || :P_HAB || l_doss_proj || l_projet ;

    
    --srw.message(1,:P_MENU);
    --srw.message(2,:P_WHERE);
    --srw.message(3,:P_HAB);
    --srw.message(4,:P_PARAM8);
    
		
		ELSE -- Si ce n'est pas le menu par référentiel ("cas normal")
			begin
  			select niveau into l_niveau
  			from entite_structure
  			where codcamo= :P_PARAM7;
  
  			SELECT MAX(tr.ANNEE) into a_recup from taux_recup tr;
  
  			:A_WHERE := 'and tr.annee = l.annee';
  
		  	if (l_niveau=0 and :P_PARAM8<=a_recup) then
		  		:A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.codcamo='||:P_PARAM7;
		  	elsif (l_niveau=1 and :P_PARAM8<=a_recup)then
		  		:A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.caniv1='||:P_PARAM7;
		  	elsif (l_niveau=2 and :P_PARAM8<=a_recup)then
		  		:A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.caniv2='||:P_PARAM7;
		  	elsif (l_niveau=3 and :P_PARAM8<=a_recup)then
		  	  :A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.caniv3='||:P_PARAM7;
		  	elsif (l_niveau=4 and :P_PARAM8<=a_recup)then
		  		:A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.caniv4='||:P_PARAM7;
		  	elsif (l_niveau=5 and :P_PARAM8<=a_recup)then
		  		:A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.caniv5='||:P_PARAM7;
		  	elsif (l_niveau=6 and :P_PARAM8<=a_recup)then
		  		:A_WHERE := :A_WHERE;
		  		:P_WHERE := 'and c.caniv6='||:P_PARAM7;
		  	end if;
  
  			:P_ANNEE  := ' (SELECT MAX(tr2.ANNEE) from taux_recup tr2) ';
  
  			if (l_niveau=0 and :P_PARAM8>a_recup) then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.codcamo='||:P_PARAM7;
		  	elsif (l_niveau=1 and :P_PARAM8>a_recup)then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.caniv1='||:P_PARAM7;
		  	elsif (l_niveau=2 and :P_PARAM8>a_recup)then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.caniv2='||:P_PARAM7;
		  	elsif (l_niveau=3 and :P_PARAM8>a_recup)then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.caniv3='||:P_PARAM7;
		  	elsif (l_niveau=4 and :P_PARAM8>a_recup)then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.caniv4='||:P_PARAM7;
		  	elsif (l_niveau=5 and :P_PARAM8>a_recup)then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.caniv5='||:P_PARAM7;
		  	elsif (l_niveau=6 and :P_PARAM8>a_recup)then
		  		:P_WHERE := 'and tr.annee in ' || :P_ANNEE || ' and c.caniv6='||:P_PARAM7;
		  	end if;
  
		  	exception 
		  		when no_data_found then null;

		  end;
		  	
  		:P_WHERE := :P_WHERE || ' AND l.annee = :P_PARAM8';
  		
    --srw.message(1,:P_WHERE);

		END IF;
    

		return (TRUE);
  
end;]]>
      </textSource>
    </function>
  </programUnits>
  <webSource>
  <![CDATA[<%@ taglib uri="/WEB-INF/lib/reports_tld.jar" prefix="rw" %> 
<%@ page language="java" import="java.io.*" errorPage="/rwerror.jsp" session="false" %>
<%@ page contentType="text/html;charset=ISO-8859-1" %>
<!--
<rw:report id="report"> 
<rw:objects id="objects">
</rw:objects>
-->

<html>

<head>
<meta name="GENERATOR" content="Oracle 11gR1 Reports Developer"/>
<title> Your Title </title>

<rw:style id="yourStyle">
   <!-- Report Wizard inserts style link clause here -->
</rw:style>

</head>


<body>

<rw:dataArea id="yourDataArea">
   <!-- Report Wizard inserts the default jsp here -->
</rw:dataArea>



</body>
</html>

<!--
</rw:report> 
-->
]]>
  </webSource>
  <reportPrivate defaultReportType="tabular" versionFlags2="0" templateName=""
  />
  <reportWebSettings>
  <![CDATA[#NULL#]]>
  </reportWebSettings>
</report>